import{r as e,b as t,a as s}from"./vendor-0ee0b1fe.js";import{H as a,R as r,a as n,N as l}from"./router-340009f3.js";import{c as i}from"./utils-0b871e7b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var o={exports:{}},c={},d=e,m=Symbol.for("react.element"),x=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,h=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,s){var a,r={},n=null,l=null;for(a in void 0!==s&&(n=""+s),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,a)&&!g.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:m,type:e,key:n,ref:l,props:r,_owner:h.current}}c.Fragment=x,c.jsx=p,c.jsxs=p,o.exports=c;var f=o.exports,y={},v=t;y.createRoot=v.createRoot,y.hydrateRoot=v.hydrateRoot;let j,b,N,w={data:""},S=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,C=/\/\*[^]*?\*\/|  +/g,E=/\n+/g,A=(e,t)=>{let s="",a="",r="";for(let n in e){let l=e[n];"@"==n[0]?"i"==n[1]?s=n+" "+l+";":a+="f"==n[1]?A(l,n):n+"{"+A(l,"k"==n[1]?"":t)+"}":"object"==typeof l?a+=A(l,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):n):null!=l&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=A.p?A.p(n,l):n+":"+l+";")}return s+(t&&r?t+"{"+r+"}":r)+a},k={},I=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+I(e[s]);return t}return e};function L(e){let t=this||{},s=e.call?e(t.p):e;return((e,t,s,a,r)=>{let n=I(e),l=k[n]||(k[n]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(n));if(!k[l]){let t=n!==e?e:(e=>{let t,s,a=[{}];for(;t=S.exec(e.replace(C,""));)t[4]?a.shift():t[3]?(s=t[3].replace(E," ").trim(),a.unshift(a[0][s]=a[0][s]||{})):a[0][t[1]]=t[2].replace(E," ").trim();return a[0]})(e);k[l]=A(r?{["@keyframes "+l]:t}:t,s?"":"."+l)}let i=s&&k.g?k.g:null;return s&&(k.g=k[l]),o=k[l],c=t,d=a,(m=i)?c.data=c.data.replace(m,o):-1===c.data.indexOf(o)&&(c.data=d?o+c.data:c.data+o),l;var o,c,d,m})(s.unshift?s.raw?((e,t,s)=>e.reduce((e,a,r)=>{let n=t[r];if(n&&n.call){let e=n(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?"."+t:e&&"object"==typeof e?e.props?"":A(e,""):!1===e?"":e}return e+a+(null==n?"":n)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,(e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||w})(t.target),t.g,t.o,t.k)}L.bind({g:1});let P=L.bind({k:1});function T(e,t){let s=this||{};return function(){let a=arguments;function r(n,l){let i=Object.assign({},n),o=i.className||r.className;s.p=Object.assign({theme:b&&b()},i),s.o=/ *go\d+/.test(o),i.className=L.apply(s,a)+(o?" "+o:""),t&&(i.ref=l);let c=e;return e[0]&&(c=i.as||e,delete i.as),N&&c[0]&&N(i),j(c,i)}return t?t(r):r}}var R=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,M=(()=>{let e=0;return()=>(++e).toString()})(),z=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),F="default",D=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,s)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:a}=t;return D(e,{type:e.toasts.find(e=>e.id===a.id)?1:0,toast:a});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let n=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+n}))}}},O=[],U={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},$={},K=(e,t=F)=>{$[t]=D($[t]||U,e),O.forEach(([e,s])=>{e===t&&s($[t])})},H=e=>Object.keys($).forEach(t=>K(e,t)),B=(e=F)=>t=>{K(t,e)},q={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},W=e=>(t,s)=>{let a=((e,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(null==s?void 0:s.id)||M()}))(t,e,s);return B(a.toasterId||(e=>Object.keys($).find(t=>$[t].toasts.some(t=>t.id===e)))(a.id))({type:2,toast:a}),a.id},_=(e,t)=>W("blank")(e,t);_.error=W("error"),_.success=W("success"),_.loading=W("loading"),_.custom=W("custom"),_.dismiss=(e,t)=>{let s={type:3,toastId:e};t?B(t)(s):H(s)},_.dismissAll=e=>_.dismiss(void 0,e),_.remove=(e,t)=>{let s={type:4,toastId:e};t?B(t)(s):H(s)},_.removeAll=e=>_.remove(void 0,e),_.promise=(e,t,s)=>{let a=_.loading(t.loading,{...s,...null==s?void 0:s.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let r=t.success?R(t.success,e):void 0;return r?_.success(r,{id:a,...s,...null==s?void 0:s.success}):_.dismiss(a),e}).catch(e=>{let r=t.error?R(t.error,e):void 0;r?_.error(r,{id:a,...s,...null==s?void 0:s.error}):_.dismiss(a)}),e};var X,Y,G,J,V=(t,s="default")=>{let{toasts:a,pausedAt:r}=((t={},s=F)=>{let[a,r]=e.useState($[s]||U),n=e.useRef($[s]);e.useEffect(()=>(n.current!==$[s]&&r($[s]),O.push([s,r]),()=>{let e=O.findIndex(([e])=>e===s);e>-1&&O.splice(e,1)}),[s]);let l=a.toasts.map(e=>{var s,a,r;return{...t,...t[e.type],...e,removeDelay:e.removeDelay||(null==(s=t[e.type])?void 0:s.removeDelay)||(null==t?void 0:t.removeDelay),duration:e.duration||(null==(a=t[e.type])?void 0:a.duration)||(null==t?void 0:t.duration)||q[e.type],style:{...t.style,...null==(r=t[e.type])?void 0:r.style,...e.style}}});return{...a,toasts:l}})(t,s),n=e.useRef(new Map).current,l=e.useCallback((e,t=1e3)=>{if(n.has(e))return;let s=setTimeout(()=>{n.delete(e),i({type:4,toastId:e})},t);n.set(e,s)},[]);e.useEffect(()=>{if(r)return;let e=Date.now(),t=a.map(t=>{if(t.duration===1/0)return;let a=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(a<0))return setTimeout(()=>_.dismiss(t.id,s),a);t.visible&&_.dismiss(t.id)});return()=>{t.forEach(e=>e&&clearTimeout(e))}},[a,r,s]);let i=e.useCallback(B(s),[s]),o=e.useCallback(()=>{i({type:5,time:Date.now()})},[i]),c=e.useCallback((e,t)=>{i({type:1,toast:{id:e,height:t}})},[i]),d=e.useCallback(()=>{r&&i({type:6,time:Date.now()})},[r,i]),m=e.useCallback((e,t)=>{let{reverseOrder:s=!1,gutter:r=8,defaultPosition:n}=t||{},l=a.filter(t=>(t.position||n)===(e.position||n)&&t.height),i=l.findIndex(t=>t.id===e.id),o=l.filter((e,t)=>t<i&&e.visible).length;return l.filter(e=>e.visible).slice(...s?[o+1]:[0,o]).reduce((e,t)=>e+(t.height||0)+r,0)},[a]);return e.useEffect(()=>{a.forEach(e=>{if(e.dismissed)l(e.id,e.removeDelay);else{let t=n.get(e.id);t&&(clearTimeout(t),n.delete(e.id))}})},[a,l]),{toasts:a,handlers:{updateHeight:c,startPause:o,endPause:d,calculateOffset:m}}},Z=P`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Q=P`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ee=P`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,te=T("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Z} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Q} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ee} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,se=P`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ae=T("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${se} 1s linear infinite;
`,re=P`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ne=P`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,le=T("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${re} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ne} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ie=T("div")`
  position: absolute;
`,oe=T("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ce=P`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,de=T("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ce} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,me=({toast:t})=>{let{icon:s,type:a,iconTheme:r}=t;return void 0!==s?"string"==typeof s?e.createElement(de,null,s):s:"blank"===a?null:e.createElement(oe,null,e.createElement(ae,{...r}),"loading"!==a&&e.createElement(ie,null,"error"===a?e.createElement(te,{...r}):e.createElement(le,{...r})))},xe=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,ue=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,he=T("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ge=T("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,pe=e.memo(({toast:t,position:s,style:a,children:r})=>{let n=t.height?((e,t)=>{let s=e.includes("top")?1:-1,[a,r]=z()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[xe(s),ue(s)];return{animation:t?`${P(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${P(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||s||"top-center",t.visible):{opacity:0},l=e.createElement(me,{toast:t}),i=e.createElement(ge,{...t.ariaProps},R(t.message,t));return e.createElement(he,{className:t.className,style:{...n,...a,...t.style}},"function"==typeof r?r({icon:l,message:i}):e.createElement(e.Fragment,null,l,i))});X=e.createElement,A.p=Y,j=X,b=G,N=J;var fe=({id:t,className:s,style:a,onHeightUpdate:r,children:n})=>{let l=e.useCallback(e=>{if(e){let s=()=>{let s=e.getBoundingClientRect().height;r(t,s)};s(),new MutationObserver(s).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return e.createElement("div",{ref:l,className:s,style:a},n)},ye=L`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ve=({reverseOrder:t,position:s="top-center",toastOptions:a,gutter:r,children:n,toasterId:l,containerStyle:i,containerClassName:o})=>{let{toasts:c,handlers:d}=V(a,l);return e.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...i},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(a=>{let l=a.position||s,i=((e,t)=>{let s=e.includes("top"),a=s?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:z()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...a,...r}})(l,d.calculateOffset(a,{reverseOrder:t,gutter:r,defaultPosition:s}));return e.createElement(fe,{id:a.id,key:a.id,onHeightUpdate:d.updateHeight,className:a.visible?ye:"",style:i},"custom"===a.type?R(a.message,a):n?n(a):e.createElement(pe,{toast:a,position:l}))}))};const je=i((e,t)=>({isConfigured:!1,isSetupComplete:!1,config:null,connectionStatus:{pusher:"disconnected",zeromq:"disconnected",api:"disconnected",mt5:"disconnected"},isTradingEnabled:!1,isEmergencyStopActive:!1,mt5Installations:[],performanceMetrics:{totalTrades:0,winRate:0,profitFactor:0,dailyPnL:0,maxDrawdown:0},activeStrategies:[],recentActivity:[],logs:[],currentPage:"dashboard",isLoading:!1,setIsConfigured:t=>e({isConfigured:t}),setIsSetupComplete:t=>e({isSetupComplete:t}),setConfig:t=>e({config:t}),setConnectionStatus:t=>e({connectionStatus:t}),updateConnectionStatus:t=>e(e=>({connectionStatus:{...e.connectionStatus,...t}})),setIsTradingEnabled:t=>e({isTradingEnabled:t}),setIsEmergencyStopActive:t=>e({isEmergencyStopActive:t}),setMT5Installations:t=>e({mt5Installations:t}),setPerformanceMetrics:t=>e({performanceMetrics:t}),setActiveStrategies:t=>e({activeStrategies:t}),setCurrentPage:t=>e({currentPage:t}),setIsLoading:t=>e({isLoading:t}),addRecentActivity:t=>e(e=>({recentActivity:[{...t,id:t.id||Date.now().toString()},...e.recentActivity].slice(0,50)})),clearRecentActivity:()=>e({recentActivity:[]}),addLog:t=>e(e=>({logs:[{...t,id:Date.now()+Math.random(),timestamp:new Date},...e.logs].slice(0,500)})),clearLogs:()=>e({logs:[]})}));function be(e,t){let s;try{s=e()}catch(a){return}return{getItem:e=>{var a;const r=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),n=null!=(a=s.getItem(e))?a:null;return n instanceof Promise?n.then(r):r(n)},setItem:(e,a)=>s.setItem(e,JSON.stringify(a,null==t?void 0:t.replacer)),removeItem:e=>s.removeItem(e)}}const Ne=e=>t=>{try{const s=e(t);return s instanceof Promise?s:{then:e=>Ne(e)(s),catch(e){return this}}}catch(X){return{then(e){return this},catch:t=>Ne(t)(X)}}},we=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((e,t)=>(s,a,r)=>{let n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},l=!1;const i=new Set,o=new Set;let c;try{c=n.getStorage()}catch(p){}if(!c)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),s(...e)},a,r);const d=Ne(n.serialize),m=()=>{const e=n.partialize({...a()});let t;const s=d({state:e,version:n.version}).then(e=>c.setItem(n.name,e)).catch(e=>{t=e});if(t)throw t;return s},x=r.setState;r.setState=(e,t)=>{x(e,t),m()};const u=e((...e)=>{s(...e),m()},a,r);let h;const g=()=>{var e;if(!c)return;l=!1,i.forEach(e=>e(a()));const t=(null==(e=n.onRehydrateStorage)?void 0:e.call(n,a()))||void 0;return Ne(c.getItem.bind(c))(n.name).then(e=>{if(e)return n.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return e.state;if(n.migrate)return n.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(e=>{var t;return h=n.merge(e,null!=(t=a())?t:u),s(h,!0),m()}).then(()=>{null==t||t(h,void 0),l=!0,o.forEach(e=>e(h))}).catch(e=>{null==t||t(void 0,e)})};return r.persist={setOptions:e=>{n={...n,...e},e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>g(),hasHydrated:()=>l,onHydrate:e=>(i.add(e),()=>{i.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},g(),h||u})(e,t):((e,t)=>(s,a,r)=>{let n={storage:be(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},l=!1;const i=new Set,o=new Set;let c=n.storage;if(!c)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),s(...e)},a,r);const d=()=>{const e=n.partialize({...a()});return c.setItem(n.name,{state:e,version:n.version})},m=r.setState;r.setState=(e,t)=>{m(e,t),d()};const x=e((...e)=>{s(...e),d()},a,r);let u;r.getInitialState=()=>x;const h=()=>{var e,t;if(!c)return;l=!1,i.forEach(e=>{var t;return e(null!=(t=a())?t:x)});const r=(null==(t=n.onRehydrateStorage)?void 0:t.call(n,null!=(e=a())?e:x))||void 0;return Ne(c.getItem.bind(c))(n.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];if(n.migrate)return[!0,n.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;const[r,l]=e;if(u=n.merge(l,null!=(t=a())?t:x),s(u,!0),r)return d()}).then(()=>{null==r||r(u,void 0),u=a(),l=!0,o.forEach(e=>e(u))}).catch(e=>{null==r||r(void 0,e)})};return r.persist={setOptions:e=>{n={...n,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>h(),hasHydrated:()=>l,onHydrate:e=>(i.add(e),()=>{i.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},n.skipHydration||h(),u||x})(e,t),Se={platformUrl:"https://fx.nusanexus.com",pusherCluster:"mt1",zmqPort:5555,zmqHost:"tcp://localhost",heartbeatInterval:60,autoReconnect:!0},Ce=i()(we((e,t)=>({config:Se,isLoading:!1,error:null,updateConfig:t=>e(e=>({config:{...e.config,...t},error:null})),resetConfig:()=>e({config:Se,error:null,isLoading:!1}),isConfigured:()=>{const{config:e}=t();return!!(e.executorId&&e.apiKey&&e.apiSecret&&e.pusherKey&&e.pusherCluster)},getApiCredentials:()=>{const{config:e}=t();return e.apiKey&&e.apiSecret?{apiKey:e.apiKey,apiSecret:e.apiSecret,sharedSecret:e.sharedSecret}:null},updateApiCredentials:(t,s,a)=>e(e=>({config:{...e.config,apiKey:t,apiSecret:s,sharedSecret:a},error:null})),getSharedSecret:()=>{const{config:e}=t();return e.sharedSecret||null},fetchConfigFromPlatform:async(s,a,r)=>{e({isLoading:!0,error:null});try{if(!s||!a||!r)throw new Error("Missing required credentials");const t=new URL("/api/executor/config",r).toString(),n=await fetch(t,{method:"GET",headers:{"X-API-Key":s,"X-API-Secret":a,"Content-Type":"application/json"}});if(!n.ok){const e=(await n.json().catch(()=>({}))).message||`HTTP ${n.status}`;throw 401===n.status?new Error("Invalid API credentials. Please check your key and secret."):404===n.status?new Error("Executor not found. Please verify your credentials."):429===n.status?new Error("Too many requests. Please wait a moment and try again."):new Error(`Failed to fetch configuration: ${e}`)}const l=await n.json();if(!l.success||!l.config)throw new Error("Invalid response from platform");const i=l.config;return e(e=>({config:{...e.config,apiKey:s,apiSecret:a,platformUrl:r,executorId:i.executorId,executorName:i.executorName,pusherKey:i.pusherKey,pusherCluster:i.pusherCluster,zmqPort:i.zmqPort,zmqHost:i.zmqHost,heartbeatInterval:i.heartbeatInterval,commandTimeout:i.commandTimeout,autoReconnect:i.autoReconnect,retryAttempts:i.retryAttempts},isLoading:!1,error:null})),console.log(`âœ… Configuration auto-provisioned for executor: ${i.executorId}`),!0}catch(n){const s=n instanceof Error?n.message:"Unknown error";return console.error("âŒ Failed to fetch platform configuration:",s),e({isLoading:!1,error:s,config:{...t().config,pusherKey:"",pusherCluster:""}}),!1}},setLoading:t=>e({isLoading:t}),setError:t=>e({error:t})}),{name:"executor-config"}));function Ee({size:e="md",className:t="",text:s}){return f.jsxs("div",{className:`flex flex-col items-center justify-center ${t}`,children:[f.jsx("div",{className:`${{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[e]} animate-spin rounded-full border-2 border-gray-300 border-t-primary-600`}),s&&f.jsx("p",{className:"mt-2 text-sm text-gray-600",children:s})]})}function Ae({status:e,size:t="md",showLabel:s=!1,label:a,className:r=""}){const n=a||{online:"Online",offline:"Offline",warning:"Warning",error:"Error"}[e];return f.jsxs("div",{className:`flex items-center space-x-2 ${r}`,children:[f.jsx("div",{className:`\n        ${{sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4"}[t]} \n        ${{online:"bg-success-500",offline:"bg-gray-400",warning:"bg-warning-500",error:"bg-danger-500"}[e]} \n        rounded-full\n        ${"online"===e?"pulse-ring-success":""}\n      `}),s&&f.jsx("span",{className:"text-xs text-gray-600",children:n})]})}function ke(){const{config:t,updateConfig:s,fetchConfigFromPlatform:a,isLoading:r,error:n}=Ce(),{setIsSetupComplete:l,addLog:i,mt5Installations:o,setMT5Installations:c,setIsLoading:d}=je(),[m,x]=e.useState(1),[u,h]=e.useState(!1),[g,p]=e.useState(!1),[y]=e.useState({step:0,message:""}),[v,j]=e.useState("idle"),[b,N]=e.useState([]),[w,S]=e.useState("https://fx.nusanexus.com"),[C,E]=e.useState(t.apiKey||""),[A,k]=e.useState(t.apiSecret||""),[I,L]=e.useState(t.sharedSecret||"");e.useEffect(()=>{var e;console.log("=".repeat(80)),console.log("ðŸ”ðŸ”ðŸ” [Setup.tsx] COMPONENT MOUNTED!"),console.log("ðŸ” platformUrl state:",w),console.log("ðŸ” config.platformUrl:",t.platformUrl),console.log("ðŸ” config.apiKey:",(null==(e=t.apiKey)?void 0:e.substring(0,10))+"..."),console.log("=".repeat(80))},[]),e.useEffect(()=>{(async()=>{var e,t,s;try{console.log("=== Setup.tsx: Starting MT5 detection ==="),console.log("electronAPI available?",!!window.electronAPI),console.log("getMT5Installations available?",typeof(null==(e=window.electronAPI)?void 0:e.getMT5Installations)),d(!0);const a=await(null==(s=null==(t=window.electronAPI)?void 0:t.getMT5Installations)?void 0:s.call(t))||[];console.log("=== MT5 Detection Result ==="),console.log("Installations count:",a.length),console.log("Installations data:",a),console.log("Current mt5Installations state:",o),c(a),console.log("setMT5Installations called with:",a),i({level:"info",category:"SETUP",message:`Found ${a.length} MT5 installation(s)`,metadata:{installations:a}})}catch(a){console.error("=== MT5 Detection ERROR ===",a),i({level:"error",category:"SETUP",message:`Failed to detect MT5: ${a.message}`})}finally{d(!1)}})()},[i,c,d]);const P=async()=>{var e,t;try{h(!0),N([]),i({level:"info",category:"SETUP",message:"Starting auto-installation..."});const s=await(null==(t=null==(e=window.electronAPI)?void 0:e.autoInstallMT5)?void 0:t.call(e));if((null==s?void 0:s.mt5Installations)&&c(s.mt5Installations),null==s?void 0:s.success)i({level:"info",category:"SETUP",message:"Auto-installation completed successfully",metadata:s}),x(2);else{const e=(null==s?void 0:s.errors)&&s.errors.length>0?s.errors:["Auto-installation failed"];N(e),i({level:"error",category:"SETUP",message:e.join("; "),metadata:s})}}catch(s){const e=s.message;N([e]),i({level:"error",category:"SETUP",message:`Auto-installation error: ${e}`})}finally{h(!1)}};return 1===m?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"ðŸ–¥ï¸ FX Platform Executor Setup"}),f.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Welcome! We'll automatically set up everything for you."})]}),f.jsxs("div",{className:"card p-6",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Step 1/3: Auto-Install Components"}),(console.log("=== RENDER: mt5Installations ===",o),console.log("Length:",o.length),console.log("Is Array?",Array.isArray(o)),null),o.length>0?f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Ae,{status:"online"}),f.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Found ",o.length," MT5 installation(s)"]})]}),o.map((e,t)=>f.jsxs("div",{className:"text-xs text-gray-500 ml-6",children:["ðŸ“ ",e.path," (Build ",e.build,")"]},t))]}):f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Ae,{status:"offline"}),f.jsx("span",{className:"text-sm text-gray-600",children:"âŒ No MT5 installations found"})]})]}),f.jsx("div",{className:"card p-6 bg-blue-50 border border-blue-200",children:f.jsxs("p",{className:"text-sm text-blue-900",children:["ðŸ“¦ We'll automatically install:",f.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[f.jsx("li",{children:"libzmq.dll (x64 & x86)"}),f.jsx("li",{children:"Expert Advisor (ZeroMQBridge)"}),f.jsx("li",{children:"Configuration files"})]})]})}),u?f.jsxs("div",{className:"space-y-4",children:[f.jsx(Ee,{text:"Installing components..."}),f.jsx("div",{className:"text-xs text-gray-500 text-center",children:y.message})]}):f.jsx("button",{onClick:P,disabled:0===o.length,className:"w-full btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:o.length>0?"âœ… Start Auto-Installation":"âŒ MT5 Not Found"}),b.length>0&&f.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx(Ae,{status:"error"})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Errors"}),f.jsx("div",{className:"mt-2 text-sm text-red-700 space-y-1",children:b.map((e,t)=>f.jsxs("p",{children:["â€¢ ",e]},t))})]})]})})]})}):2===m?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"ðŸ”‘ API Credentials"}),f.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Step 2/3: Enter your API credentials from the platform"})]}),f.jsxs("div",{className:"card p-6 space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"platformUrl",className:"label",children:"Platform URL"}),f.jsx("input",{id:"platformUrl",type:"text",value:w,onChange:e=>S(e.target.value),className:"input mt-1",placeholder:"https://fx.nusanexus.com"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave default if using our platform"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"apiKey",className:"label",children:"API Key"}),f.jsx("input",{id:"apiKey",type:"text",value:C,onChange:e=>E(e.target.value),className:"input mt-1",placeholder:"exe_xxxxxxxxxxxxxxxx"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Found in your executor dashboard"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"apiSecret",className:"label",children:"API Secret"}),f.jsx("input",{id:"apiSecret",type:"password",value:A,onChange:e=>k(e.target.value),className:"input mt-1",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Encrypted locally, never stored in plain text"})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"sharedSecret",className:"label",children:["Shared Secret ",f.jsx("span",{className:"text-blue-600",children:"(For MT5 EA)"})]}),f.jsx("input",{id:"sharedSecret",type:"password",value:I,onChange:e=>L(e.target.value),className:"input mt-1",placeholder:"Paste from web platform"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ðŸ“‹ Copy this from web platform when creating executor. Used for MT5 EA authentication."})]}),f.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:f.jsx("p",{className:"text-xs text-blue-900",children:"â„¹ï¸ Your credentials will be used to auto-fetch Pusher configuration and other platform settings. No manual configuration needed!"})}),"idle"!==v&&f.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-md bg-gray-100",children:["success"===v&&f.jsxs(f.Fragment,{children:[f.jsx(Ae,{status:"online"}),f.jsx("span",{className:"text-sm font-medium text-green-700",children:"âœ… Configuration fetched & connection successful"})]}),"testing"===v&&f.jsxs(f.Fragment,{children:[f.jsx(Ee,{size:"sm"}),f.jsx("span",{className:"text-sm text-gray-700",children:"Testing connection..."})]}),"error"===v&&f.jsxs(f.Fragment,{children:[f.jsx(Ae,{status:"error"}),f.jsx("span",{className:"text-sm font-medium text-red-700",children:"Connection failed"})]})]}),b.length>0&&f.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx(Ae,{status:"error"})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Connection Error"}),f.jsx("div",{className:"mt-2 text-sm text-red-700 space-y-1",children:b.map((e,t)=>f.jsxs("p",{children:["â€¢ ",e]},t))})]})]})}),f.jsxs("div",{className:"flex space-x-3",children:[f.jsx("button",{onClick:()=>x(1),className:"flex-1 btn btn-secondary",children:"â† Back"}),f.jsxs("button",{onClick:()=>{console.log("ðŸ”˜ [Setup.tsx] Button clicked!"),(async()=>{var e;if(console.log("ðŸš€ [Setup.tsx] handleConnectAndFetchConfig CALLED!"),console.log("[Setup.tsx] Inputs:",{platformUrl:w,apiKey:(null==C?void 0:C.substring(0,10))+"...",apiSecret:"***"}),!w||!C||!A)return console.error("[Setup.tsx] Validation failed: missing credentials"),void N(["Please fill in all credentials"]);if(!C.startsWith("exe_"))return console.error("[Setup.tsx] Validation failed: API key format"),void N(['API Key must start with "exe_"']);console.log("[Setup.tsx] Validation passed, starting connection...");try{p(!0),j("testing"),N([]),i({level:"info",category:"SETUP",message:"Fetching configuration from platform..."}),console.log("[Setup.tsx] Calling fetchConfigFromPlatform...");const r=await a(C,A,w);if(console.log("[Setup.tsx] fetchConfigFromPlatform result:",r),!r)return console.error("[Setup.tsx] Config fetch failed!"),j("error"),N([n||"Failed to fetch configuration from platform"]),void i({level:"error",category:"SETUP",message:n||"Configuration fetch failed"});I&&(console.log("[Setup.tsx] Saving shared secret to config..."),s({sharedSecret:I}),i({level:"info",category:"SETUP",message:"Shared secret configured for MT5 EA authentication"})),console.log("[Setup.tsx] Config fetch SUCCESS! Current config:",t),i({level:"info",category:"SETUP",message:"âœ… Configuration auto-provisioned from platform",metadata:{executorId:t.executorId,pusherKey:t.pusherKey?"***":"not set",pusherCluster:t.pusherCluster}}),console.log("[Setup.tsx] Config fetch successful, calling setupComplete..."),console.log("[Setup.tsx] Config to send:",{executorId:t.executorId,platformUrl:t.platformUrl,hasPusherKey:!!t.pusherKey}),i({level:"info",category:"SETUP",message:"Testing connection to services..."}),console.log("[Setup.tsx] Calling window.electronAPI.setupComplete...");const l=await(null==(e=window.electronAPI)?void 0:e.setupComplete(t));if(console.log("[Setup.tsx] setupComplete result:",l),null==l?void 0:l.success)j("success"),i({level:"info",category:"SETUP",message:"All services connected successfully"}),x(3);else{j("error");const e=(null==l?void 0:l.error)||"Service connection failed";N([e]),i({level:"error",category:"SETUP",message:e})}}catch(r){j("error");const e=r.message;N([e]),i({level:"error",category:"SETUP",message:`Connection error: ${e}`})}finally{p(!1)}})()},disabled:g||r||!C||!A,className:"flex-1 btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[(g||r)&&f.jsx(Ee,{size:"sm"}),f.jsx("span",{children:g?"Connecting...":"Connect & Auto-Provision"})]})]})]})]})}):3===m?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"ðŸŽ‰ Ready to Trade!"}),f.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Step 3/3: Your executor is fully configured and ready."})]}),f.jsxs("div",{className:"card p-6 space-y-4",children:[f.jsxs("div",{className:"space-y-3 mb-6",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"MT5 detected & configured"})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"libzmq.dll installed (x64 & x86)"})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Expert Advisor installed"})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"API connection established"})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pusher real-time connection ready"})]})]}),f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"What happens next:"}),f.jsxs("ul",{className:"space-y-2 text-xs text-gray-600",children:[f.jsx("li",{children:"âœ¨ The Expert Advisor starts monitoring for trading signals"}),f.jsx("li",{children:"ðŸ“¡ Real-time commands are received via Pusher"}),f.jsx("li",{children:"ðŸ”Œ ZeroMQ bridge manages all MT5 communication"}),f.jsx("li",{children:"ðŸ“Š Heartbeat keeps your connection alive"})]})]}),f.jsxs("div",{className:"bg-gray-50 rounded-md p-3 space-y-2 text-xs",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Executor ID:"}),f.jsx("span",{className:"font-mono font-semibold text-gray-900",children:t.executorId})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Platform URL:"}),f.jsx("span",{className:"font-mono text-gray-900 truncate",children:t.platformUrl})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-gray-600",children:"Pusher Cluster:"}),f.jsx("span",{className:"font-mono font-semibold text-gray-900",children:t.pusherCluster})]})]}),f.jsx("button",{onClick:()=>{var e;console.log("ðŸ”˜ Start Executor button clicked!"),console.log("electronAPI available?",!!window.electronAPI),console.log("setupComplete available?",typeof(null==(e=window.electronAPI)?void 0:e.setupComplete)),(async()=>{try{if(console.log("[Setup.tsx] handleCompleteSetup called"),console.log("[Setup.tsx] Current config:",t),!window.electronAPI){const e="electronAPI not available - check preload script";return console.error("[Setup.tsx]",e),void N([e])}if(!window.electronAPI.setupComplete){const e="setupComplete function not found in electronAPI";return console.error("[Setup.tsx]",e),void N([e])}p(!0),N([]),console.log("[Setup.tsx] Calling setupComplete with config:",{executorId:t.executorId,platformUrl:t.platformUrl,hasPusherKey:!!t.pusherKey,pusherCluster:t.pusherCluster});const e=await window.electronAPI.setupComplete(t);if(console.log("[Setup.tsx] setupComplete result:",e),!(null==e?void 0:e.success)){const t=(null==e?void 0:e.error)||"Setup completion failed";return console.error("[Setup.tsx] Setup failed:",t),N([t]),void p(!1)}console.log("[Setup.tsx] Setup completed successfully! Reloading app..."),l(!0),i({level:"info",category:"SETUP",message:"Setup completed successfully"}),console.log("[Setup.tsx] Reloading window to apply configuration..."),setTimeout(()=>{window.location.reload()},1e3)}catch(e){const t=e instanceof Error?e.message:String(e);console.error("[Setup.tsx] Setup error caught:",e),console.error("[Setup.tsx] Error stack:",e instanceof Error?e.stack:"No stack"),N([t]),i({level:"error",category:"SETUP",message:`Setup completion error: ${t}`})}finally{p(!1)}})()},disabled:g,className:"w-full btn btn-primary btn-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:g?f.jsxs(f.Fragment,{children:[f.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),f.jsx("span",{children:"Starting..."})]}):f.jsx("span",{children:"ðŸš€ Start Executor"})}),b.length>0&&f.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Setup Error"}),f.jsx("div",{className:"mt-2 text-sm text-red-700 space-y-1",children:b.map((e,t)=>f.jsxs("p",{children:["â€¢ ",e]},t))})]})]})})]})]})}):null}
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ie={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(t,s)=>{const a=e.forwardRef(({color:a="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:i="",children:o,...c},d)=>{return e.createElement("svg",{ref:d,...Ie,width:r,height:r,stroke:a,strokeWidth:l?24*Number(n)/Number(r):n,className:["lucide",`lucide-${m=t,m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,i].join(" "),...c},[...s.map(([t,s])=>e.createElement(t,s)),...Array.isArray(o)?o:[o]]);var m});return a.displayName=`${t}`,a},Pe=Le("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Te=Le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Re=Le("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Me=Le("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),ze=Le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Fe=Le("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),De=Le("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Oe(){var t,s,a,r,n;const{connectionStatus:l,config:i,isConfigured:o,performanceMetrics:c,recentActivity:d}=je(),[m,x]=e.useState(null),[u,h]=e.useState(null),[g,p]=e.useState([]),[y,v]=e.useState([]),[j,b]=e.useState([]),[N,w]=e.useState(!1),[S,C]=e.useState(new Date);e.useEffect(()=>{E();const e=setInterval(()=>{E()},3e4);return()=>clearInterval(e)},[]);const E=async()=>{var e,t,s,a,r,n,l,i,o,c;console.log("[Dashboard] ðŸ”„ Loading dashboard data...");try{const d=await(null==(t=null==(e=window.electronAPI)?void 0:e.getMT5AccountInfo)?void 0:t.call(e));d&&x(d);const m=await(null==(a=null==(s=window.electronAPI)?void 0:s.getSystemHealth)?void 0:a.call(s));m&&h(m);const u=await(null==(n=null==(r=window.electronAPI)?void 0:r.getRecentSignals)?void 0:n.call(r,10));u&&p(u);const g=await(null==(i=null==(l=window.electronAPI)?void 0:l.getActiveStrategies)?void 0:i.call(l));g&&v(g);const f=await(null==(c=null==(o=window.electronAPI)?void 0:o.getEAAttachments)?void 0:c.call(o));f?(console.log("[Dashboard] EA Attachments loaded:",f),b(f)):console.log("[Dashboard] No EA attachments found"),C(new Date)}catch(d){console.error("[Dashboard] Failed to load data:",d)}},A=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),k=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return f.jsx("div",{className:"h-full overflow-auto bg-gray-50 p-6",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Windows Executor"}),f.jsxs("p",{className:"text-sm text-gray-600",children:["Monitoring â€¢ Last updated: ",k(S)]})]}),f.jsxs("button",{onClick:async()=>{w(!0),await E(),setTimeout(()=>w(!1),500)},disabled:N,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:[f.jsx(Me,{className:"h-4 w-4 mr-2 "+(N?"animate-spin":"")}),"Refresh"]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Web Platform"}),f.jsx(Ae,{status:"connected"===l.pusher?"online":"offline",size:"sm"})]}),f.jsx("div",{className:"text-xs text-gray-500",children:"connected"===l.pusher?"Connected":"Disconnected"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-sm font-medium text-gray-600",children:"MT5 Terminal"}),f.jsx(Ae,{status:"connected"===l.mt5?"online":"offline",size:"sm"})]}),f.jsx("div",{className:"text-xs text-gray-500",children:"connected"===l.mt5?"Connected":"Disconnected"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsx("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Balance"}),f.jsx("div",{className:"text-lg font-bold text-gray-900",children:m?A(m.balance):"---"}),f.jsxs("div",{className:"text-xs text-gray-500",children:["Equity: ",m?A(m.equity):"---"]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[f.jsx("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Positions"}),f.jsx("div",{className:"text-lg font-bold text-gray-900",children:(null==m?void 0:m.openPositions)||0}),f.jsx("div",{className:"text-xs text-gray-500",children:"Active now"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow",children:[f.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[f.jsxs("h2",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[f.jsx(Pe,{className:"h-4 w-4 mr-2 text-blue-500"}),"Active Strategies"]}),f.jsxs("span",{className:"text-xs text-gray-500",children:[y.length," running"]})]}),f.jsx("div",{className:"p-4",children:y.length>0?f.jsx("div",{className:"space-y-3",children:y.slice(0,5).map(e=>{var t,s;const a=(e=>{if(!e.symbols||0===e.symbols.length)return console.log("[EA Check] Strategy has no symbols:",e.name),!1;const t=e.timeframe||"M15",s=e.symbols.some(e=>{const s=j.some(s=>s.symbol===e&&s.timeframe===t);return s&&console.log(`[EA Check] âœ… Found attachment for ${e} ${t}`),s});return s||console.log(`[EA Check] âŒ No attachment found for ${e.name}`,{symbols:e.symbols,timeframe:t,availableAttachments:j}),s})(e);return console.log(`[Render] Strategy: ${e.name}, EA Attached: ${a}`,{symbols:e.symbols,timeframe:e.timeframe}),f.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-white hover:shadow-md transition",children:[f.jsx("div",{className:"flex items-start justify-between mb-2",children:f.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[f.jsx(Ae,{status:"active"===e.status?"online":"warning",size:"sm"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:[e.name,a&&f.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:[f.jsx(De,{className:"h-3 w-3 mr-1"}),"EA Attached"]})]}),f.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[(null==(t=e.symbols)?void 0:t.slice(0,3).join(", "))||"No symbols",(null==(s=e.symbols)?void 0:s.length)>3&&" +"+(e.symbols.length-3),f.jsx("span",{className:"mx-1",children:"â€¢"}),e.timeframe||"M15"]})]})]})}),f.jsx("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-100",children:a?f.jsxs("button",{onClick:()=>(async e=>{var t,s;try{if(!e.symbols||0===e.symbols.length)return void alert("Strategy has no symbols defined");const a=e.timeframe||"M15",r=e.symbols.filter(e=>j.some(t=>t.symbol===e&&t.timeframe===a));let n=r[0]||e.symbols[0];if(r.length>1){const e=prompt(`EAs attached to: ${r.join(", ")}\n\nWhich one do you want to detach?`,r[0]);if(!e)return;n=e.toUpperCase().trim()}let l=(null==m?void 0:m.accountNumber)||"";if(!l&&(l=prompt("Enter MT5 Account Number:")||"",!l))return;console.log("[EA Detach] Notifying EA detached:",{symbol:n,timeframe:a,accountNumber:l}),await(null==(s=null==(t=window.electronAPI)?void 0:t.notifyEADetached)?void 0:s.call(t,{symbol:n,timeframe:a,accountNumber:l})),await E(),console.log("[EA Detach] âœ… EA marked as detached successfully"),alert(`âœ… EA marked as detached for ${e.name} (${n} ${a})`)}catch(a){console.error("[EA Detach] âŒ Failed to notify EA detached:",a),alert("Failed to mark EA as detached")}})(e),className:"flex-1 inline-flex items-center justify-center px-3 py-1.5 bg-red-50 text-red-700 border border-red-200 rounded-md hover:bg-red-100 transition text-xs font-medium",children:[f.jsx(Fe,{className:"h-3.5 w-3.5 mr-1.5"}),"Mark EA Detached"]}):f.jsxs("button",{onClick:()=>(async e=>{var t,s;try{if(!e.symbols||0===e.symbols.length)return void alert("Strategy has no symbols defined");let a=e.symbols[0];if(e.symbols.length>1){const t=prompt(`This strategy has multiple symbols: ${e.symbols.join(", ")}\n\nWhich symbol did you attach EA to?`,e.symbols[0]);if(!t)return;a=t.toUpperCase().trim()}const r=e.timeframe||"M15";let n=(null==m?void 0:m.accountNumber)||"";if(!n&&(n=prompt("Enter MT5 Account Number:")||"",!n))return;console.log("[EA Attach] Notifying EA attached:",{symbol:a,timeframe:r,accountNumber:n}),await(null==(s=null==(t=window.electronAPI)?void 0:t.notifyEAAttached)?void 0:s.call(t,{symbol:a,timeframe:r,accountNumber:n})),await E(),console.log("[EA Attach] âœ… EA marked as attached successfully"),alert(`âœ… EA marked as attached for ${e.name} (${a} ${r})`)}catch(a){console.error("[EA Attach] âŒ Failed to notify EA attached:",a),alert("Failed to mark EA as attached")}})(e),className:"flex-1 inline-flex items-center justify-center px-3 py-1.5 bg-green-50 text-green-700 border border-green-200 rounded-md hover:bg-green-100 transition text-xs font-medium",children:[f.jsx(Re,{className:"h-3.5 w-3.5 mr-1.5"}),"Mark EA Attached"]})})]},e.id)})}):f.jsxs("div",{className:"text-center py-8 text-gray-400",children:[f.jsx(Pe,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),f.jsx("p",{className:"text-sm",children:"No active strategies"})]})})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow",children:[f.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[f.jsxs("h2",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[f.jsx(ze,{className:"h-4 w-4 mr-2 text-green-500"}),"Recent Signals"]}),f.jsx("span",{className:"text-xs text-gray-500",children:"Last 10"})]}),f.jsx("div",{className:"p-4",children:g.length>0?f.jsx("div",{className:"space-y-2",children:g.slice(0,10).map((e,t)=>{var s;return f.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-gray-100 last:border-0",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"px-2 py-1 text-xs font-bold rounded "+("BUY"===e.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.type}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.symbol}),f.jsxs("div",{className:"text-xs text-gray-500",children:["@ ",null==(s=e.price)?void 0:s.toFixed(5)]})]})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("div",{className:"text-xs text-gray-600",children:k(e.timestamp)}),f.jsxs("div",{className:"text-xs text-gray-500",children:[e.confidence,"% conf"]})]})]},t)})}):f.jsxs("div",{className:"text-center py-8 text-gray-400",children:[f.jsx(ze,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),f.jsx("p",{className:"text-sm",children:"No recent signals"})]})})]})]}),f.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow",children:[f.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:f.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"Performance"})}),f.jsxs("div",{className:"p-4 space-y-3",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Today P&L"}),f.jsxs("span",{className:"text-sm font-bold "+(c.dailyPnL>=0?"text-green-600":"text-red-600"),children:[c.dailyPnL>=0?"+":"",A(c.dailyPnL)]})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Win Rate"}),f.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[c.winRate.toFixed(1),"%"]})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Total Trades"}),f.jsx("span",{className:"text-sm font-medium text-gray-900",children:c.totalTrades})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Profit Factor"}),f.jsx("span",{className:"text-sm font-medium text-gray-900",children:c.profitFactor.toFixed(2)})]}),f.jsx("div",{className:"pt-3 border-t border-gray-200",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Margin Level"}),f.jsxs("span",{className:"text-sm font-bold "+(((null==m?void 0:m.marginLevel)||0)>200?"text-green-600":((null==m?void 0:m.marginLevel)||0)>100?"text-yellow-600":"text-red-600"),children:[(null==(t=null==m?void 0:m.marginLevel)?void 0:t.toFixed(0))||0,"%"]})]})})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow",children:[f.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[f.jsxs("h2",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[f.jsx(Te,{className:"h-4 w-4 mr-2 text-blue-500"}),"System Health"]}),f.jsx(Ae,{status:(null==u?void 0:u.healthy)?"online":"warning",size:"sm"})]}),f.jsxs("div",{className:"p-4 space-y-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Evaluations/min"}),f.jsx("span",{className:"text-sm font-medium text-gray-900",children:(null==(s=null==u?void 0:u.evaluationsPerMinute)?void 0:s.toFixed(1))||"0.0"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Avg Response"}),f.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(null==(a=null==u?void 0:u.avgEvaluationTime)?void 0:a.toFixed(0))||"0","ms"]})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Cache Hit Rate"}),f.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(null==(r=null==u?void 0:u.cacheHitRate)?void 0:r.toFixed(0))||"0","%"]})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm text-gray-600",children:"Memory Usage"}),f.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(null==(n=null==u?void 0:u.memoryUsage)?void 0:n.toFixed(0))||"0","MB"]})]}),(null==u?void 0:u.issues)&&u.issues.length>0&&f.jsx("div",{className:"pt-3 border-t border-gray-200",children:f.jsx("div",{className:"space-y-1",children:u.issues.map((e,t)=>f.jsxs("div",{className:"flex items-start text-xs text-yellow-700",children:[f.jsx(Te,{className:"h-3 w-3 mr-1 mt-0.5 flex-shrink-0"}),f.jsx("span",{children:e})]},t))})})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow",children:[f.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:f.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"Recent Activity"})}),f.jsx("div",{className:"p-4",children:d.length>0?f.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:d.slice(0,10).map(e=>f.jsx("div",{className:"text-xs",children:f.jsxs("div",{className:"flex items-start space-x-2",children:[f.jsx("span",{className:"inline-block w-2 h-2 rounded-full mt-1 flex-shrink-0 "+("ERROR"===e.type?"bg-red-500":"INFO"===e.type?"bg-blue-500":"bg-green-500")}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-gray-700 truncate",children:e.message}),f.jsx("p",{className:"text-gray-400",children:k(e.timestamp)})]})]})},e.id))}):f.jsx("div",{className:"text-center py-4 text-gray-400",children:f.jsx("p",{className:"text-sm",children:"No recent activity"})})})]})]})]}),f.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:f.jsxs("div",{className:"flex items-center justify-between text-sm",children:[f.jsxs("div",{className:"flex items-center space-x-4 text-gray-600",children:[f.jsxs("span",{children:["Executor ID: ",f.jsx("span",{className:"font-mono text-gray-900",children:(null==i?void 0:i.executorId)||"N/A"})]}),f.jsx("span",{className:"text-gray-300",children:"|"}),f.jsxs("span",{children:["Platform: ",f.jsx("span",{className:"font-medium text-gray-900",children:(null==i?void 0:i.platformUrl)||"N/A"})]})]}),f.jsxs("div",{className:"text-gray-600",children:[f.jsx("span",{className:"text-blue-600 font-medium",children:"Full Dashboard"})," available on web platform"]})]})})]})})}const Ue=i(e=>({logs:[],logLevels:{debug:!0,info:!0,warn:!0,error:!0},maxLogs:1e3,autoScroll:!0,addLog:t=>e(e=>({logs:[{id:`${Date.now()}-${Math.random()}`,timestamp:new Date,...t},...e.logs].slice(0,e.maxLogs)})),clearLogs:()=>e({logs:[]}),setLogLevels:t=>e({logLevels:t}),toggleLogLevel:t=>e(e=>({logLevels:{...e.logLevels,[t]:!e.logLevels[t]}})),setAutoScroll:t=>e({autoScroll:t}),setMaxLogs:t=>e({maxLogs:t}),exportLogs:()=>{const e=Ue.getState();return JSON.stringify(e.logs,null,2)}}));function $e({isOpen:t,title:s,message:a,confirmText:r="Confirm",cancelText:n="Cancel",onConfirm:l,onCancel:i,type:o="primary"}){const c=e.useRef(null);if(e.useEffect(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&i()};return t&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[t,i]),e.useEffect(()=>{const e=e=>{"Escape"===e.key&&t&&i()};return t&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,i]),!t)return null;const d={primary:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),success:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),warning:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),danger:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:f.jsxs("div",{ref:c,className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[f.jsx("div",{className:"p-6",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:`flex-shrink-0 ${{primary:"text-primary-600",success:"text-success-600",warning:"text-warning-600",danger:"text-danger-600"}[o]}`,children:d[o]}),f.jsxs("div",{className:"ml-4",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s}),f.jsx("p",{className:"mt-2 text-sm text-gray-500",children:a})]})]})}),f.jsxs("div",{className:"bg-gray-50 px-6 py-3 flex justify-end space-x-3",children:[f.jsx("button",{onClick:i,className:"btn btn-secondary",children:n}),f.jsx("button",{onClick:l,className:`btn ${{primary:"btn-primary",success:"btn-success",warning:"btn-warning",danger:"btn-danger"}[o]}`,children:r})]})]})})}function Ke(){const{config:t,updateConfig:s}=Ce(),{setIsSetupComplete:a,addLog:r,mt5Installations:n}=je(),{clearLogs:l,exportLogs:i}=Ue(),[o,c]=e.useState("general"),[d,m]=e.useState(!1),[x,u]=e.useState("idle"),[h,g]=e.useState(!1),[p,y]=e.useState(!1),[v,j]=e.useState([]),[b,N]=e.useState(""),[w,S]=e.useState({maxDailyLoss:500,maxPositions:10,maxLotSize:1,maxDrawdownPercent:20}),C=async()=>{var e,s;try{if(m(!0),j([]),N(""),await(null==(e=window.electronAPI)?void 0:e.updateConfig(t)),(null==t?void 0:t.apiKey)&&(null==t?void 0:t.apiSecret)&&(null==t?void 0:t.executorId)){const e=await(null==(s=window.electronAPI)?void 0:s.updateConfig(t));e&&"object"==typeof e&&e.success?(u("success"),N("Configuration saved and connection test successful")):e&&"object"==typeof e&&e.error?(u("error"),j([e.error||"Connection test failed"])):N("Configuration saved")}else N("Configuration saved");r({level:"info",message:"Configuration updated",category:"SETTINGS"})}catch(a){const e=a.message;j([e]),r({level:"error",message:`Failed to save config: ${e}`,category:"SETTINGS"})}finally{m(!1)}};return e.useEffect(()=>{if(b||v.length>0){const e=setTimeout(()=>{N(""),j([])},5e3);return()=>clearTimeout(e)}},[b,v]),f.jsxs("div",{className:"flex-1 overflow-auto bg-gray-50 p-6",children:[f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Configure your FX Platform Executor."})]}),b&&f.jsx("div",{className:"mb-4 bg-success-50 border border-success-200 rounded-md p-4",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx(Ae,{status:"online"})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-success-800",children:"Success"}),f.jsx("div",{className:"mt-2 text-sm text-success-700",children:b})]})]})}),v.length>0&&f.jsx("div",{className:"mb-4 bg-danger-50 border border-danger-200 rounded-md p-4",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx(Ae,{status:"error"})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-danger-800",children:"Error"}),f.jsx("div",{className:"mt-2 text-sm text-danger-700",children:v.map((e,t)=>f.jsx("p",{children:e},t))})]})]})}),f.jsx("div",{className:"border-b border-gray-200 mb-6",children:f.jsx("nav",{className:"-mb-px flex space-x-8",children:["general","mt5","safety","logs"].map(e=>f.jsx("button",{onClick:()=>c(e),className:"py-2 px-1 border-b-2 font-medium text-sm "+(o===e?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),f.jsxs("div",{className:"card p-6",children:["general"===o&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"General Settings"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"executorId",className:"label",children:"Executor ID"}),f.jsx("input",{id:"executorId",type:"text",value:(null==t?void 0:t.executorId)||"",onChange:e=>s({executorId:e.target.value}),className:"input mt-1",placeholder:"Enter your executor ID"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"platformUrl",className:"label",children:"Platform URL"}),f.jsx("input",{id:"platformUrl",type:"text",value:(null==t?void 0:t.platformUrl)||"",onChange:e=>s({platformUrl:e.target.value}),className:"input mt-1",placeholder:"https://fx.nusanexus.com"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"apiKey",className:"label",children:"API Key"}),f.jsx("input",{id:"apiKey",type:"text",value:(null==t?void 0:t.apiKey)||"",onChange:e=>s({apiKey:e.target.value}),className:"input mt-1",placeholder:"Enter your API key"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"apiSecret",className:"label",children:"API Secret"}),f.jsx("input",{id:"apiSecret",type:"password",value:(null==t?void 0:t.apiSecret)||"",onChange:e=>s({apiSecret:e.target.value}),className:"input mt-1",placeholder:"Enter your API secret"})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"sharedSecret",className:"label",children:["Shared Secret ",f.jsx("span",{className:"text-xs text-gray-500",children:"(For MT5 EA)"})]}),f.jsx("input",{id:"sharedSecret",type:"password",value:(null==t?void 0:t.sharedSecret)||"",onChange:e=>s({sharedSecret:e.target.value}),className:"input mt-1",placeholder:"Paste shared secret from web platform"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Get this from web platform when creating executor. Used for MT5 EA authentication."})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"pusherKey",className:"label",children:"Pusher Key"}),f.jsx("input",{id:"pusherKey",type:"text",value:(null==t?void 0:t.pusherKey)||"",onChange:e=>s({pusherKey:e.target.value}),className:"input mt-1",placeholder:"Enter your Pusher key"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"pusherCluster",className:"label",children:"Pusher Cluster"}),f.jsx("input",{id:"pusherCluster",type:"text",value:(null==t?void 0:t.pusherCluster)||"",onChange:e=>s({pusherCluster:e.target.value}),className:"input mt-1",placeholder:"mt1"})]})]}),f.jsxs("div",{className:"flex justify-end space-x-3",children:[f.jsx("button",{onClick:()=>g(!0),className:"btn btn-secondary",children:"Reset to Defaults"}),f.jsx("button",{onClick:C,disabled:d,className:"btn btn-primary",children:d?"Saving...":"Save Configuration"})]}),"idle"!==x&&f.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[f.jsx(Ae,{status:"success"===x?"online":"error"}),f.jsx("span",{className:"text-sm text-gray-600",children:"success"===x?"Connection test successful":"Connection test failed"})]})]}),"mt5"===o&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"MT5 Settings"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"zmqHost",className:"label",children:"ZeroMQ Host"}),f.jsx("input",{id:"zmqHost",type:"text",value:(null==t?void 0:t.zmqHost)||"",onChange:e=>s({zmqHost:e.target.value}),className:"input mt-1",placeholder:"tcp://localhost"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"zmqPort",className:"label",children:"ZeroMQ Port"}),f.jsx("input",{id:"zmqPort",type:"number",value:(null==t?void 0:t.zmqPort)||"",onChange:e=>s({zmqPort:parseInt(e.target.value)}),className:"input mt-1",placeholder:"5555"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"heartbeatInterval",className:"label",children:"Heartbeat Interval (seconds)"}),f.jsx("input",{id:"heartbeatInterval",type:"number",value:(null==t?void 0:t.heartbeatInterval)||"",onChange:e=>s({heartbeatInterval:parseInt(e.target.value)}),className:"input mt-1",placeholder:"60"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{id:"autoReconnect",type:"checkbox",checked:(null==t?void 0:t.autoReconnect)||!1,onChange:e=>s({autoReconnect:e.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),f.jsx("label",{htmlFor:"autoReconnect",className:"ml-2 block text-sm text-gray-900",children:"Auto-reconnect on disconnection"})]})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h4",{className:"text-md font-medium text-gray-900",children:"MT5 Installations"}),f.jsx("button",{onClick:async()=>{var e;try{const t=await(null==(e=window.electronAPI)?void 0:e.getMT5Installations())||[];N(`Found ${t.length} MT5 installation(s)`)}catch(t){const e=t.message;j([e])}},className:"btn btn-secondary text-sm",children:"Re-detect"})]}),n.length>0?f.jsx("div",{className:"space-y-2",children:n.map((e,t)=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"font-medium text-gray-900",children:["MT5 Build ",e.build]}),f.jsx("div",{className:"text-sm text-gray-500",children:e.path})]}),f.jsx(Ae,{status:e.isRunning?"online":"offline"})]},t))}):f.jsx("div",{className:"text-center py-8 text-gray-500",children:"No MT5 installations found"})]}),f.jsxs("div",{className:"flex justify-end space-x-3",children:[f.jsx("button",{onClick:async()=>{var e;try{await(null==(e=window.electronAPI)?void 0:e.setupComplete(t)),a(!1),N("Setup reset. You will need to go through the setup process again.")}catch(s){const e=s.message;j([e])}},className:"btn btn-secondary",children:"Reset Setup"}),f.jsx("button",{onClick:C,disabled:d,className:"btn btn-primary",children:d?"Saving...":"Save Configuration"})]})]}),"safety"===o&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Safety Settings"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"maxDailyLoss",className:"label",children:"Max Daily Loss ($)"}),f.jsx("input",{id:"maxDailyLoss",type:"number",value:w.maxDailyLoss,onChange:e=>S({...w,maxDailyLoss:parseFloat(e.target.value)}),className:"input mt-1",placeholder:"500"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"maxPositions",className:"label",children:"Max Positions"}),f.jsx("input",{id:"maxPositions",type:"number",value:w.maxPositions,onChange:e=>S({...w,maxPositions:parseInt(e.target.value)}),className:"input mt-1",placeholder:"10"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"maxLotSize",className:"label",children:"Max Lot Size"}),f.jsx("input",{id:"maxLotSize",type:"number",step:"0.01",value:w.maxLotSize,onChange:e=>S({...w,maxLotSize:parseFloat(e.target.value)}),className:"input mt-1",placeholder:"1.0"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"maxDrawdownPercent",className:"label",children:"Max Drawdown (%)"}),f.jsx("input",{id:"maxDrawdownPercent",type:"number",value:w.maxDrawdownPercent,onChange:e=>S({...w,maxDrawdownPercent:parseFloat(e.target.value)}),className:"input mt-1",placeholder:"20"})]})]}),f.jsx("div",{className:"bg-warning-50 border border-warning-200 rounded-md p-4",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-warning-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"ml-3",children:[f.jsx("h3",{className:"text-sm font-medium text-warning-800",children:"Safety Limits"}),f.jsx("div",{className:"mt-2 text-sm text-warning-700",children:"These limits help protect your account from excessive losses. The executor will automatically stop trading when any limit is reached."})]})]})}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{onClick:C,disabled:d,className:"btn btn-primary",children:d?"Saving...":"Save Safety Settings"})})]}),"logs"===o&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Logs Settings"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Export Logs"}),f.jsx("p",{className:"text-sm text-gray-500",children:"Download all logs as a JSON file"})]}),f.jsx("button",{onClick:()=>{const e=i(),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`fx-executor-logs-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},className:"btn btn-secondary",children:"Export Logs"})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Clear Logs"}),f.jsx("p",{className:"text-sm text-gray-500",children:"Remove all logs from the application"})]}),f.jsx("button",{onClick:()=>y(!0),className:"btn btn-danger",children:"Clear Logs"})]})]})]})]})]}),f.jsx($e,{isOpen:h,title:"Reset Configuration",message:"Are you sure you want to reset all configuration settings to their default values? This action cannot be undone.",confirmText:"Reset",cancelText:"Cancel",onConfirm:async()=>{try{s({executorId:"",apiKey:"",apiSecret:"",platformUrl:"https://fx.nusanexus.com",pusherKey:"",pusherCluster:"mt1",zmqPort:5555,zmqHost:"tcp://localhost",heartbeatInterval:60,autoReconnect:!0}),N("Configuration reset to defaults"),g(!1),r({level:"info",message:"Configuration reset to defaults",category:"SETTINGS"})}catch(e){const t=e.message;j([t])}},onCancel:()=>g(!1),type:"warning"}),f.jsx($e,{isOpen:p,title:"Clear Logs",message:"Are you sure you want to clear all logs? This action cannot be undone.",confirmText:"Clear Logs",cancelText:"Cancel",onConfirm:()=>{l(),y(!1),N("Logs cleared")},onCancel:()=>y(!1),type:"warning"})]})}function He(){const{logs:t,logLevels:s,setLogLevels:a,autoScroll:r,setAutoScroll:n,maxLogs:l,setMaxLogs:i,exportLogs:o,clearLogs:c}=Ue(),{addLog:d}=je(),[m,x]=e.useState(""),[u,h]=e.useState("all"),[g,p]=e.useState(!1),y=e.useRef(null),v=["all",...Array.from(new Set(t.map(e=>e.category||"uncategorized").filter(Boolean)))],j=t.filter(e=>{const t=""===m||e.message.toLowerCase().includes(m.toLowerCase())||e.category&&e.category.toLowerCase().includes(m.toLowerCase()),a=!0===s[e.level],r="all"===u||e.category===u;return t&&a&&r});e.useEffect(()=>{r&&y.current&&(y.current.scrollTop=y.current.scrollHeight)},[t,r]);const b=e=>{switch(e){case"debug":default:return"text-gray-600";case"info":return"text-blue-600";case"warn":return"text-yellow-600";case"error":return"text-red-600"}},N=e=>{switch(e){case"debug":default:return"bg-gray-100";case"info":return"bg-blue-100";case"warn":return"bg-yellow-100";case"error":return"bg-red-100"}},w=e=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return f.jsx("div",{className:"flex-1 overflow-auto bg-gray-50 p-6",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Logs"}),f.jsx("p",{className:"text-sm text-gray-600",children:"View and filter application logs."})]}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",j.length," of ",t.length," logs"]}),f.jsx("button",{onClick:()=>n(!r),className:"text-xs px-3 py-1 rounded-md "+(r?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"),children:r?"Auto-scroll On":"Auto-scroll Off"}),f.jsx("button",{onClick:()=>{const e=o(),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`fx-executor-logs-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),d({level:"info",message:"Logs exported",category:"LOGS"})},className:"btn btn-secondary text-sm",children:"Export"}),f.jsx("button",{onClick:()=>{c(),d({level:"info",message:"Logs cleared by user",category:"LOGS"})},className:"btn btn-danger text-sm",children:"Clear"})]})]}),f.jsxs("div",{className:"card p-4 mb-6",children:[f.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[f.jsx("div",{className:"flex-1 min-w-64",children:f.jsx("input",{type:"text",placeholder:"Search logs...",value:m,onChange:e=>x(e.target.value),className:"input w-full"})}),f.jsx("div",{children:f.jsx("select",{value:u,onChange:e=>h(e.target.value),className:"input",children:v.map(e=>f.jsx("option",{value:e,children:"all"===e?"All Categories":e},e))})}),f.jsx("div",{children:f.jsxs("button",{onClick:()=>p(!g),className:"btn btn-secondary text-sm flex items-center space-x-2",children:[f.jsx("span",{children:"Log Levels"}),f.jsx("svg",{className:"w-4 h-4 transition-transform "+(g?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("label",{htmlFor:"maxLogs",className:"text-sm text-gray-600",children:"Max Logs:"}),f.jsx("input",{id:"maxLogs",type:"number",min:"100",max:"10000",step:"100",value:l,onChange:e=>i(parseInt(e.target.value)),className:"input w-20"})]})]}),g&&f.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:f.jsx("div",{className:"flex flex-wrap gap-2",children:["debug","info","warn","error"].map(e=>f.jsx("button",{onClick:()=>(e=>{a({...s,[e]:!s[e]})})(e),className:"px-3 py-1 rounded-md text-sm font-medium transition-colors "+(s[e]?`${N(e)} ${b(e)}`:"bg-gray-100 text-gray-600"),children:e.toUpperCase()},e))})})]}),f.jsx("div",{className:"card p-0 overflow-hidden",children:f.jsx("div",{ref:y,className:"overflow-y-auto custom-scrollbar bg-gray-900 text-gray-100 font-mono text-sm",style:{height:"calc(100vh - 300px)"},onScroll:()=>{if(y.current){const{scrollTop:e,scrollHeight:t,clientHeight:s}=y.current;n(e+s>=t-10)}},children:j.length>0?f.jsx("div",{className:"divide-y divide-gray-800",children:j.map(e=>{return f.jsx("div",{className:"px-4 py-2 hover:bg-gray-800 transition-colors",children:f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500 whitespace-nowrap",children:[f.jsx("div",{children:(t=e.timestamp,t.toLocaleDateString())}),f.jsx("div",{children:w(e.timestamp)})]}),f.jsx("div",{className:"flex-shrink-0",children:f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${N(e.level)} ${b(e.level)}`,children:e.level.toUpperCase()})}),e.category&&f.jsx("div",{className:"flex-shrink-0",children:f.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-gray-700 text-gray-300",children:e.category})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-gray-100 break-words",children:e.message}),e.metadata&&f.jsxs("details",{className:"mt-1",children:[f.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-400",children:"Metadata"}),f.jsx("pre",{className:"mt-1 text-xs text-gray-400 bg-gray-800 p-2 rounded overflow-x-auto",children:JSON.stringify(e.metadata,null,2)})]})]})]})},e.id);var t})}):f.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Ae,{status:"offline"}),f.jsx("p",{className:"mt-2",children:"No logs to display"}),f.jsx("p",{className:"text-xs mt-1",children:0===t.length?"Logs will appear here as the application runs":"Try adjusting your filters"})]})})})})]})})}function Be({connectionStatus:t,onNavigate:s,currentPage:a}){const{connectionStatus:r,config:n,isTradingEnabled:l,setIsTradingEnabled:i,isEmergencyStopActive:o}=je(),[c,d]=e.useState(!1);return f.jsxs("div",{className:"electron-drag bg-gray-900 text-white px-4 py-2 flex items-center justify-between text-sm",children:[f.jsxs("div",{className:"flex items-center space-x-6",children:[f.jsx("div",{className:"font-semibold electron-no-drag",children:"FX Platform Executor"}),f.jsxs("div",{className:"flex items-center space-x-4 electron-no-drag",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Ae,{status:"connected"===r.pusher?"online":"offline"}),f.jsx("span",{className:"text-xs",children:"Platform"})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Ae,{status:"connected"===r.mt5?"online":"offline"}),f.jsx("span",{className:"text-xs",children:"MT5"})]})]}),(null==n?void 0:n.executorId)&&f.jsxs("div",{className:"text-xs electron-no-drag",children:["Executor: ",n.executorId]})]}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsxs("div",{className:"flex items-center space-x-2 electron-no-drag relative group",children:[f.jsx("label",{className:"text-xs",children:"Auto Trading:"}),f.jsx("button",{onClick:()=>{l?d(!0):i(!0)},disabled:o,title:l?"Click to DISABLE automatic trading":"Click to ENABLE automatic trading",className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-gray-900 ${l?"bg-success-600":"bg-gray-600"} ${o?"opacity-50 cursor-not-allowed":""}`,children:f.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(l?"translate-x-6":"translate-x-1")})}),f.jsx("span",{className:"text-xs font-medium "+(l?"text-success-400":"text-gray-400"),children:l?"ON":"OFF"}),f.jsx("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block z-50",children:f.jsxs("div",{className:"bg-gray-800 text-white text-xs rounded py-2 px-3 whitespace-nowrap shadow-lg border border-gray-700",children:[f.jsx("div",{className:"font-semibold mb-1",children:"Master Trading Switch"}),f.jsx("div",{className:"text-gray-300",children:l?f.jsx(f.Fragment,{children:"â€¢ ON: Executor accepts & executes signals"}):f.jsx(f.Fragment,{children:"â€¢ OFF: All trading paused, no new orders"})})]})})]}),f.jsx("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("emergency-stop-requested"))},className:"electron-no-drag bg-danger-600 hover:bg-danger-700 text-white px-3 py-1 rounded text-xs font-medium transition-colors",children:"ðŸ›‘ Emergency"}),f.jsxs("div",{className:"flex items-center space-x-2 electron-no-drag",children:[f.jsx("button",{onClick:()=>{var e,t;return null==(t=null==(e=window.electronAPI)?void 0:e.minimizeApp)?void 0:t.call(e)},className:"text-gray-400 hover:text-white transition-colors",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),f.jsx("button",{onClick:()=>{var e,t;return null==(t=null==(e=window.electronAPI)?void 0:e.quitApp)?void 0:t.call(e)},className:"text-gray-400 hover:text-white transition-colors",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),c&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 electron-no-drag",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[f.jsxs("div",{className:"flex items-start mb-4",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),f.jsxs("div",{className:"ml-3 flex-1",children:[f.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Disable Auto Trading?"}),f.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[f.jsx("p",{className:"mb-2",children:"This will stop all automatic trading activities:"}),f.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[f.jsx("li",{children:"No new signals will be processed"}),f.jsx("li",{children:"No new orders will be opened"}),f.jsx("li",{children:"Existing positions will remain open"})]}),f.jsx("p",{className:"mt-3 font-medium text-gray-700",children:"Are you sure you want to disable trading?"})]})]})]}),f.jsxs("div",{className:"flex justify-end space-x-3",children:[f.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),f.jsx("button",{onClick:()=>{i(!1),d(!1)},className:"px-4 py-2 text-sm font-medium text-white bg-yellow-600 rounded-md hover:bg-yellow-700",children:"Yes, Disable Trading"})]})]})})]})}function qe({message:t="Loading...",progress:s}){const[a,r]=e.useState("");return e.useEffect(()=>{const e=setInterval(()=>{r(e=>e.length>=3?"":e+".")},500);return()=>clearInterval(e)},[]),f.jsx("div",{className:"fixed inset-0 bg-gray-900 flex items-center justify-center z-50",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mb-4",children:f.jsx("div",{className:"inline-block",children:f.jsxs("svg",{className:"animate-spin h-12 w-12 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}),f.jsxs("div",{className:"text-white text-xl font-semibold mb-2",children:[t,a]}),"number"==typeof s&&f.jsxs("div",{className:"w-64 mx-auto",children:[f.jsx("div",{className:"bg-gray-700 rounded-full h-2 overflow-hidden",children:f.jsx("div",{className:"bg-blue-500 h-full transition-all duration-300",style:{width:`${s}%`}})}),f.jsxs("div",{className:"text-gray-400 text-sm mt-2",children:[s,"%"]})]})]})})}function We(){console.log("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"),console.log("â•‘ ðŸš€ðŸš€ðŸš€ APP.TSX LOADED! React is running!                                      â•‘"),console.log("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");const[,t]=e.useState(!1),[s,r]=e.useState(!0),[n,l]=e.useState("setup"),{isConfigured:i,setIsConfigured:o,connectionStatus:c,setConnectionStatus:d,addRecentActivity:m,updateConnectionStatus:x}=je();e.useEffect(()=>{console.log("ðŸ”„ App useEffect triggered - initializing..."),console.log("ðŸ“ isConfigured:",i),console.log("ðŸ“ currentPage:",n);(async()=>{var e,t;try{console.log("Initializing app...");const s=await(null==(e=window.electronAPI)?void 0:e.getConfig());console.log("Config loaded:",s?"Yes":"No",s);s&&s.apiKey&&s.apiSecret&&s.platformUrl&&s.executorId?(console.log("App has valid config, showing dashboard"),o(!0),l("dashboard")):(console.log("App not configured or config invalid, showing setup wizard"),console.log("Config details:",{hasApiKey:!!(null==s?void 0:s.apiKey),hasApiSecret:!!(null==s?void 0:s.apiSecret),hasPlatformUrl:!!(null==s?void 0:s.platformUrl),hasExecutorId:!!(null==s?void 0:s.executorId)}),o(!1),l("setup")),u();const a=await(null==(t=window.electronAPI)?void 0:t.getStatus());a&&d(a.connectionStatus),r(!1),console.log("App initialization complete")}catch(s){console.error("Failed to initialize app:",s),r(!1)}})()},[o,d]);const u=()=>{var e,s,a,r,n,l,i;const o=null==(e=window.electronAPI)?void 0:e.onExecutorInitialized(()=>{t(!0),m({id:Date.now().toString(),type:"INFO",message:"Executor initialized successfully",timestamp:new Date})}),c=null==(s=window.electronAPI)?void 0:s.onConnectionStatusChanged(e=>{x(e);const t=Object.values(e).every(e=>"connected"===e);m({id:Date.now().toString(),type:t?"INFO":"ERROR",message:t?"All services connected":"Some services disconnected",timestamp:new Date,metadata:{connectionStatus:e}})}),d=null==(a=window.electronAPI)?void 0:a.onSafetyAlert(e=>{m({id:Date.now().toString(),type:"ERROR",message:"Safety alert triggered",timestamp:new Date,metadata:e})}),u=null==(r=window.electronAPI)?void 0:r.onEmergencyStop(e=>{m({id:Date.now().toString(),type:"ERROR",message:`Emergency stop activated: ${e.reason||"Unknown reason"}`,timestamp:new Date,metadata:e})}),h=null==(n=window.electronAPI)?void 0:n.onPerformanceAlert(e=>{m({id:Date.now().toString(),type:"INFO",message:"Performance alert",timestamp:new Date,metadata:e})}),g=null==(l=window.electronAPI)?void 0:l.onSecurityThreat(e=>{m({id:Date.now().toString(),type:"ERROR",message:"Security threat detected",timestamp:new Date,metadata:e})}),p=null==(i=window.electronAPI)?void 0:i.onLogAdded(e=>{"error"!==e.level&&"warn"!==e.level||m({id:e.id.toString(),type:"error"===e.level?"ERROR":"INFO",message:e.message,timestamp:e.timestamp,metadata:{category:e.category,...e.metadata}})});return()=>{null==o||o(),null==c||c(),null==d||d(),null==u||u(),null==h||h(),null==g||g(),null==p||p()}};return s?(console.log("Rendering loading screen"),f.jsx(qe,{message:"Initializing FX Executor..."})):i?f.jsx(a,{children:f.jsx(_e,{})}):(console.log("Rendering setup wizard"),f.jsx("div",{className:"min-h-screen bg-gray-100",children:f.jsx(ke,{})}))}function _e(){const{connectionStatus:e}=je();return f.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[f.jsx(Be,{connectionStatus:e,onNavigate:()=>{},currentPage:"dashboard"}),f.jsx("div",{className:"flex-1 overflow-auto",children:f.jsxs(r,{children:[f.jsx(n,{path:"/",element:f.jsx(Oe,{})}),f.jsx(n,{path:"/dashboard",element:f.jsx(Oe,{})}),f.jsx(n,{path:"/settings",element:f.jsx(Ke,{})}),f.jsx(n,{path:"/logs",element:f.jsx(He,{})}),f.jsx(n,{path:"*",element:f.jsx(l,{to:"/",replace:!0})})]})}),f.jsx(ve,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})}console.log("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"),console.log("â•‘  ðŸŽ¯ MAIN.TSX ENTRY POINT!             â•‘"),console.log("â•‘  JavaScript is executing!             â•‘"),console.log("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.log("âœ… All imports loaded successfully!"),console.log("ðŸ“ window.location:",window.location.href);const Xe=window.navigator.userAgent.includes("Electron");console.log("ðŸ“ isElectron:",Xe);y.createRoot(document.getElementById("root")).render(f.jsx(s.StrictMode,{children:f.jsx(We,{})})),console.log(`Running in ${Xe?"Electron":"Browser"} environment`);
