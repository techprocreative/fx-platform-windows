import{r as e,b as t,a as s}from"./vendor-0ee0b1fe.js";import{B as a,u as r,L as n,R as l,a as i,N as o}from"./router-4653bcff.js";import{c}from"./utils-0b871e7b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var d={exports:{}},m={},x=e,u=Symbol.for("react.element"),g=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,p=x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function y(e,t,s){var a,r={},n=null,l=null;for(a in void 0!==s&&(n=""+s),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(l=t.ref),t)h.call(t,a)&&!f.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:u,type:e,key:n,ref:l,props:r,_owner:p.current}}m.Fragment=g,m.jsx=y,m.jsxs=y,d.exports=m;var v=d.exports,j={},b=t;j.createRoot=b.createRoot,j.hydrateRoot=b.hydrateRoot;let N,w,S,C={data:""},k=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,L=/\/\*[^]*?\*\/|  +/g,I=/\n+/g,E=(e,t)=>{let s="",a="",r="";for(let n in e){let l=e[n];"@"==n[0]?"i"==n[1]?s=n+" "+l+";":a+="f"==n[1]?E(l,n):n+"{"+E(l,"k"==n[1]?"":t)+"}":"object"==typeof l?a+=E(l,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):n):null!=l&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=E.p?E.p(n,l):n+":"+l+";")}return s+(t&&r?t+"{"+r+"}":r)+a},P={},A=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+A(e[s]);return t}return e};function R(e){let t=this||{},s=e.call?e(t.p):e;return((e,t,s,a,r)=>{let n=A(e),l=P[n]||(P[n]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(n));if(!P[l]){let t=n!==e?e:(e=>{let t,s,a=[{}];for(;t=k.exec(e.replace(L,""));)t[4]?a.shift():t[3]?(s=t[3].replace(I," ").trim(),a.unshift(a[0][s]=a[0][s]||{})):a[0][t[1]]=t[2].replace(I," ").trim();return a[0]})(e);P[l]=E(r?{["@keyframes "+l]:t}:t,s?"":"."+l)}let i=s&&P.g?P.g:null;return s&&(P.g=P[l]),o=P[l],c=t,d=a,(m=i)?c.data=c.data.replace(m,o):-1===c.data.indexOf(o)&&(c.data=d?o+c.data:c.data+o),l;var o,c,d,m})(s.unshift?s.raw?((e,t,s)=>e.reduce((e,a,r)=>{let n=t[r];if(n&&n.call){let e=n(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?"."+t:e&&"object"==typeof e?e.props?"":E(e,""):!1===e?"":e}return e+a+(null==n?"":n)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,(e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||C})(t.target),t.g,t.o,t.k)}R.bind({g:1});let T=R.bind({k:1});function z(e,t){let s=this||{};return function(){let a=arguments;function r(n,l){let i=Object.assign({},n),o=i.className||r.className;s.p=Object.assign({theme:w&&w()},i),s.o=/ *go\d+/.test(o),i.className=R.apply(s,a)+(o?" "+o:""),t&&(i.ref=l);let c=e;return e[0]&&(c=i.as||e,delete i.as),S&&c[0]&&S(i),N(c,i)}return t?t(r):r}}var M=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,O=(()=>{let e=0;return()=>(++e).toString()})(),D=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),F="default",U=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,s)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:a}=t;return U(e,{type:e.toasts.find(e=>e.id===a.id)?1:0,toast:a});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let n=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+n}))}}},$=[],K={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},H={},B=(e,t=F)=>{H[t]=U(H[t]||K,e),$.forEach(([e,s])=>{e===t&&s(H[t])})},q=e=>Object.keys(H).forEach(t=>B(e,t)),W=(e=F)=>t=>{B(t,e)},_={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},J=e=>(t,s)=>{let a=((e,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(null==s?void 0:s.id)||O()}))(t,e,s);return W(a.toasterId||(e=>Object.keys(H).find(t=>H[t].toasts.some(t=>t.id===e)))(a.id))({type:2,toast:a}),a.id},V=(e,t)=>J("blank")(e,t);V.error=J("error"),V.success=J("success"),V.loading=J("loading"),V.custom=J("custom"),V.dismiss=(e,t)=>{let s={type:3,toastId:e};t?W(t)(s):q(s)},V.dismissAll=e=>V.dismiss(void 0,e),V.remove=(e,t)=>{let s={type:4,toastId:e};t?W(t)(s):q(s)},V.removeAll=e=>V.remove(void 0,e),V.promise=(e,t,s)=>{let a=V.loading(t.loading,{...s,...null==s?void 0:s.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let r=t.success?M(t.success,e):void 0;return r?V.success(r,{id:a,...s,...null==s?void 0:s.success}):V.dismiss(a),e}).catch(e=>{let r=t.error?M(t.error,e):void 0;r?V.error(r,{id:a,...s,...null==s?void 0:s.error}):V.dismiss(a)}),e};var X,G,Y,Z,Q=(t,s="default")=>{let{toasts:a,pausedAt:r}=((t={},s=F)=>{let[a,r]=e.useState(H[s]||K),n=e.useRef(H[s]);e.useEffect(()=>(n.current!==H[s]&&r(H[s]),$.push([s,r]),()=>{let e=$.findIndex(([e])=>e===s);e>-1&&$.splice(e,1)}),[s]);let l=a.toasts.map(e=>{var s,a,r;return{...t,...t[e.type],...e,removeDelay:e.removeDelay||(null==(s=t[e.type])?void 0:s.removeDelay)||(null==t?void 0:t.removeDelay),duration:e.duration||(null==(a=t[e.type])?void 0:a.duration)||(null==t?void 0:t.duration)||_[e.type],style:{...t.style,...null==(r=t[e.type])?void 0:r.style,...e.style}}});return{...a,toasts:l}})(t,s),n=e.useRef(new Map).current,l=e.useCallback((e,t=1e3)=>{if(n.has(e))return;let s=setTimeout(()=>{n.delete(e),i({type:4,toastId:e})},t);n.set(e,s)},[]);e.useEffect(()=>{if(r)return;let e=Date.now(),t=a.map(t=>{if(t.duration===1/0)return;let a=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(a<0))return setTimeout(()=>V.dismiss(t.id,s),a);t.visible&&V.dismiss(t.id)});return()=>{t.forEach(e=>e&&clearTimeout(e))}},[a,r,s]);let i=e.useCallback(W(s),[s]),o=e.useCallback(()=>{i({type:5,time:Date.now()})},[i]),c=e.useCallback((e,t)=>{i({type:1,toast:{id:e,height:t}})},[i]),d=e.useCallback(()=>{r&&i({type:6,time:Date.now()})},[r,i]),m=e.useCallback((e,t)=>{let{reverseOrder:s=!1,gutter:r=8,defaultPosition:n}=t||{},l=a.filter(t=>(t.position||n)===(e.position||n)&&t.height),i=l.findIndex(t=>t.id===e.id),o=l.filter((e,t)=>t<i&&e.visible).length;return l.filter(e=>e.visible).slice(...s?[o+1]:[0,o]).reduce((e,t)=>e+(t.height||0)+r,0)},[a]);return e.useEffect(()=>{a.forEach(e=>{if(e.dismissed)l(e.id,e.removeDelay);else{let t=n.get(e.id);t&&(clearTimeout(t),n.delete(e.id))}})},[a,l]),{toasts:a,handlers:{updateHeight:c,startPause:o,endPause:d,calculateOffset:m}}},ee=T`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,te=T`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,se=T`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ae=z("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ee} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${te} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${se} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,re=T`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ne=z("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${re} 1s linear infinite;
`,le=T`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ie=T`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,oe=z("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${le} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ie} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ce=z("div")`
  position: absolute;
`,de=z("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,me=T`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xe=z("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${me} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ue=({toast:t})=>{let{icon:s,type:a,iconTheme:r}=t;return void 0!==s?"string"==typeof s?e.createElement(xe,null,s):s:"blank"===a?null:e.createElement(de,null,e.createElement(ne,{...r}),"loading"!==a&&e.createElement(ce,null,"error"===a?e.createElement(ae,{...r}):e.createElement(oe,{...r})))},ge=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,he=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,pe=z("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,fe=z("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ye=e.memo(({toast:t,position:s,style:a,children:r})=>{let n=t.height?((e,t)=>{let s=e.includes("top")?1:-1,[a,r]=D()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[ge(s),he(s)];return{animation:t?`${T(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${T(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||s||"top-center",t.visible):{opacity:0},l=e.createElement(ue,{toast:t}),i=e.createElement(fe,{...t.ariaProps},M(t.message,t));return e.createElement(pe,{className:t.className,style:{...n,...a,...t.style}},"function"==typeof r?r({icon:l,message:i}):e.createElement(e.Fragment,null,l,i))});X=e.createElement,E.p=G,N=X,w=Y,S=Z;var ve=({id:t,className:s,style:a,onHeightUpdate:r,children:n})=>{let l=e.useCallback(e=>{if(e){let s=()=>{let s=e.getBoundingClientRect().height;r(t,s)};s(),new MutationObserver(s).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return e.createElement("div",{ref:l,className:s,style:a},n)},je=R`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,be=({reverseOrder:t,position:s="top-center",toastOptions:a,gutter:r,children:n,toasterId:l,containerStyle:i,containerClassName:o})=>{let{toasts:c,handlers:d}=Q(a,l);return e.createElement("div",{"data-rht-toaster":l||"",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...i},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(a=>{let l=a.position||s,i=((e,t)=>{let s=e.includes("top"),a=s?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:D()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...a,...r}})(l,d.calculateOffset(a,{reverseOrder:t,gutter:r,defaultPosition:s}));return e.createElement(ve,{id:a.id,key:a.id,onHeightUpdate:d.updateHeight,className:a.visible?je:"",style:i},"custom"===a.type?M(a.message,a):n?n(a):e.createElement(ye,{toast:a,position:l}))}))};const Ne=c((e,t)=>({isConfigured:!1,isSetupComplete:!1,config:null,connectionStatus:{pusher:"disconnected",zeromq:"disconnected",api:"disconnected",mt5:"disconnected"},isTradingEnabled:!1,isEmergencyStopActive:!1,mt5Installations:[],performanceMetrics:{totalTrades:0,winRate:0,profitFactor:0,dailyPnL:0,maxDrawdown:0},activeStrategies:[],recentActivity:[],logs:[],currentPage:"dashboard",isLoading:!1,setIsConfigured:t=>e({isConfigured:t}),setIsSetupComplete:t=>e({isSetupComplete:t}),setConfig:t=>e({config:t}),setConnectionStatus:t=>e({connectionStatus:t}),updateConnectionStatus:t=>e(e=>({connectionStatus:{...e.connectionStatus,...t}})),setIsTradingEnabled:t=>e({isTradingEnabled:t}),setIsEmergencyStopActive:t=>e({isEmergencyStopActive:t}),setMT5Installations:t=>e({mt5Installations:t}),setPerformanceMetrics:t=>e({performanceMetrics:t}),setActiveStrategies:t=>e({activeStrategies:t}),setCurrentPage:t=>e({currentPage:t}),setIsLoading:t=>e({isLoading:t}),addRecentActivity:t=>e(e=>({recentActivity:[{...t,id:t.id||Date.now().toString()},...e.recentActivity].slice(0,50)})),clearRecentActivity:()=>e({recentActivity:[]}),addLog:t=>e(e=>({logs:[{...t,id:Date.now()+Math.random(),timestamp:new Date},...e.logs].slice(0,500)})),clearLogs:()=>e({logs:[]})}));function we(e,t){let s;try{s=e()}catch(a){return}return{getItem:e=>{var a;const r=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),n=null!=(a=s.getItem(e))?a:null;return n instanceof Promise?n.then(r):r(n)},setItem:(e,a)=>s.setItem(e,JSON.stringify(a,null==t?void 0:t.replacer)),removeItem:e=>s.removeItem(e)}}const Se=e=>t=>{try{const s=e(t);return s instanceof Promise?s:{then:e=>Se(e)(s),catch(e){return this}}}catch(X){return{then(e){return this},catch:t=>Se(t)(X)}}},Ce=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((e,t)=>(s,a,r)=>{let n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},l=!1;const i=new Set,o=new Set;let c;try{c=n.getStorage()}catch(p){}if(!c)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),s(...e)},a,r);const d=Se(n.serialize),m=()=>{const e=n.partialize({...a()});let t;const s=d({state:e,version:n.version}).then(e=>c.setItem(n.name,e)).catch(e=>{t=e});if(t)throw t;return s},x=r.setState;r.setState=(e,t)=>{x(e,t),m()};const u=e((...e)=>{s(...e),m()},a,r);let g;const h=()=>{var e;if(!c)return;l=!1,i.forEach(e=>e(a()));const t=(null==(e=n.onRehydrateStorage)?void 0:e.call(n,a()))||void 0;return Se(c.getItem.bind(c))(n.name).then(e=>{if(e)return n.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return e.state;if(n.migrate)return n.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(e=>{var t;return g=n.merge(e,null!=(t=a())?t:u),s(g,!0),m()}).then(()=>{null==t||t(g,void 0),l=!0,o.forEach(e=>e(g))}).catch(e=>{null==t||t(void 0,e)})};return r.persist={setOptions:e=>{n={...n,...e},e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>h(),hasHydrated:()=>l,onHydrate:e=>(i.add(e),()=>{i.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},h(),g||u})(e,t):((e,t)=>(s,a,r)=>{let n={storage:we(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},l=!1;const i=new Set,o=new Set;let c=n.storage;if(!c)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),s(...e)},a,r);const d=()=>{const e=n.partialize({...a()});return c.setItem(n.name,{state:e,version:n.version})},m=r.setState;r.setState=(e,t)=>{m(e,t),d()};const x=e((...e)=>{s(...e),d()},a,r);let u;r.getInitialState=()=>x;const g=()=>{var e,t;if(!c)return;l=!1,i.forEach(e=>{var t;return e(null!=(t=a())?t:x)});const r=(null==(t=n.onRehydrateStorage)?void 0:t.call(n,null!=(e=a())?e:x))||void 0;return Se(c.getItem.bind(c))(n.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];if(n.migrate)return[!0,n.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;const[r,l]=e;if(u=n.merge(l,null!=(t=a())?t:x),s(u,!0),r)return d()}).then(()=>{null==r||r(u,void 0),u=a(),l=!0,o.forEach(e=>e(u))}).catch(e=>{null==r||r(void 0,e)})};return r.persist={setOptions:e=>{n={...n,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>g(),hasHydrated:()=>l,onHydrate:e=>(i.add(e),()=>{i.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},n.skipHydration||g(),u||x})(e,t),ke={platformUrl:"https://fx.nusanexus.com",pusherCluster:"mt1",zmqPort:5555,zmqHost:"tcp://localhost",heartbeatInterval:60,autoReconnect:!0},Le=c()(Ce((e,t)=>({config:ke,isLoading:!1,error:null,updateConfig:t=>e(e=>({config:{...e.config,...t},error:null})),resetConfig:()=>e({config:ke,error:null,isLoading:!1}),isConfigured:()=>{const{config:e}=t();return!!(e.executorId&&e.apiKey&&e.apiSecret&&e.pusherKey&&e.pusherCluster)},getApiCredentials:()=>{const{config:e}=t();return e.apiKey&&e.apiSecret?{apiKey:e.apiKey,apiSecret:e.apiSecret}:null},updateApiCredentials:(t,s)=>e(e=>({config:{...e.config,apiKey:t,apiSecret:s},error:null})),fetchConfigFromPlatform:async(s,a,r)=>{e({isLoading:!0,error:null});try{if(!s||!a||!r)throw new Error("Missing required credentials");const t=new URL("/api/executor/config",r).toString(),n=await fetch(t,{method:"GET",headers:{"X-API-Key":s,"X-API-Secret":a,"Content-Type":"application/json"}});if(!n.ok){const e=(await n.json().catch(()=>({}))).message||`HTTP ${n.status}`;throw 401===n.status?new Error("Invalid API credentials. Please check your key and secret."):404===n.status?new Error("Executor not found. Please verify your credentials."):429===n.status?new Error("Too many requests. Please wait a moment and try again."):new Error(`Failed to fetch configuration: ${e}`)}const l=await n.json();if(!l.success||!l.config)throw new Error("Invalid response from platform");const i=l.config;return e(e=>({config:{...e.config,apiKey:s,apiSecret:a,platformUrl:r,executorId:i.executorId,executorName:i.executorName,pusherKey:i.pusherKey,pusherCluster:i.pusherCluster,zmqPort:i.zmqPort,zmqHost:i.zmqHost,heartbeatInterval:i.heartbeatInterval,commandTimeout:i.commandTimeout,autoReconnect:i.autoReconnect,retryAttempts:i.retryAttempts},isLoading:!1,error:null})),console.log(`✅ Configuration auto-provisioned for executor: ${i.executorId}`),!0}catch(n){const s=n instanceof Error?n.message:"Unknown error";return console.error("❌ Failed to fetch platform configuration:",s),e({isLoading:!1,error:s,config:{...t().config,pusherKey:"",pusherCluster:""}}),!1}},setLoading:t=>e({isLoading:t}),setError:t=>e({error:t})}),{name:"executor-config"}));function Ie({size:e="md",className:t="",text:s}){return v.jsxs("div",{className:`flex flex-col items-center justify-center ${t}`,children:[v.jsx("div",{className:`${{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[e]} animate-spin rounded-full border-2 border-gray-300 border-t-primary-600`}),s&&v.jsx("p",{className:"mt-2 text-sm text-gray-600",children:s})]})}function Ee({status:e,size:t="md",showLabel:s=!1,label:a,className:r=""}){const n=a||{online:"Online",offline:"Offline",warning:"Warning",error:"Error"}[e];return v.jsxs("div",{className:`flex items-center space-x-2 ${r}`,children:[v.jsx("div",{className:`\n        ${{sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4"}[t]} \n        ${{online:"bg-success-500",offline:"bg-gray-400",warning:"bg-warning-500",error:"bg-danger-500"}[e]} \n        rounded-full\n        ${"online"===e?"pulse-ring-success":""}\n      `}),s&&v.jsx("span",{className:"text-xs text-gray-600",children:n})]})}function Pe(){const{config:t,fetchConfigFromPlatform:s,isLoading:a,error:r}=Le(),{setIsSetupComplete:n,addLog:l,mt5Installations:i,setMT5Installations:o,setIsLoading:c}=Ne(),[d,m]=e.useState(1),[x,u]=e.useState(!1),[g,h]=e.useState(!1),[p]=e.useState({step:0,message:""}),[f,y]=e.useState("idle"),[j,b]=e.useState([]),[N,w]=e.useState("https://fx.nusanexus.com"),[S,C]=e.useState(t.apiKey||""),[k,L]=e.useState(t.apiSecret||"");e.useEffect(()=>{var e;console.clear(),console.log("=".repeat(80)),console.log("🔍🔍🔍 [Setup.tsx] COMPONENT MOUNTED!"),console.log("🔍 platformUrl state:",N),console.log("🔍 config.platformUrl:",t.platformUrl),console.log("🔍 config.apiKey:",(null==(e=t.apiKey)?void 0:e.substring(0,10))+"..."),console.log("=".repeat(80))},[]),e.useEffect(()=>{(async()=>{var e,t,s;try{console.log("=== Setup.tsx: Starting MT5 detection ==="),console.log("electronAPI available?",!!window.electronAPI),console.log("getMT5Installations available?",typeof(null==(e=window.electronAPI)?void 0:e.getMT5Installations)),c(!0);const a=await(null==(s=null==(t=window.electronAPI)?void 0:t.getMT5Installations)?void 0:s.call(t))||[];console.log("=== MT5 Detection Result ==="),console.log("Installations count:",a.length),console.log("Installations data:",a),console.log("Current mt5Installations state:",i),o(a),console.log("setMT5Installations called with:",a),l({level:"info",category:"SETUP",message:`Found ${a.length} MT5 installation(s)`,metadata:{installations:a}})}catch(a){console.error("=== MT5 Detection ERROR ===",a),l({level:"error",category:"SETUP",message:`Failed to detect MT5: ${a.message}`})}finally{c(!1)}})()},[l,o,c]);const I=async()=>{var e,t;try{u(!0),b([]),l({level:"info",category:"SETUP",message:"Starting auto-installation..."});const s=await(null==(t=null==(e=window.electronAPI)?void 0:e.autoInstallMT5)?void 0:t.call(e));if((null==s?void 0:s.mt5Installations)&&o(s.mt5Installations),null==s?void 0:s.success)l({level:"info",category:"SETUP",message:"Auto-installation completed successfully",metadata:s}),m(2);else{const e=(null==s?void 0:s.errors)&&s.errors.length>0?s.errors:["Auto-installation failed"];b(e),l({level:"error",category:"SETUP",message:e.join("; "),metadata:s})}}catch(s){const e=s.message;b([e]),l({level:"error",category:"SETUP",message:`Auto-installation error: ${e}`})}finally{u(!1)}};return 1===d?v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"🖥️ FX Platform Executor Setup"}),v.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Welcome! We'll automatically set up everything for you."})]}),v.jsxs("div",{className:"card p-6",children:[v.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Step 1/3: Auto-Install Components"}),(console.log("=== RENDER: mt5Installations ===",i),console.log("Length:",i.length),console.log("Is Array?",Array.isArray(i)),null),i.length>0?v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(Ee,{status:"online"}),v.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Found ",i.length," MT5 installation(s)"]})]}),i.map((e,t)=>v.jsxs("div",{className:"text-xs text-gray-500 ml-6",children:["📍 ",e.path," (Build ",e.build,")"]},t))]}):v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(Ee,{status:"offline"}),v.jsx("span",{className:"text-sm text-gray-600",children:"❌ No MT5 installations found"})]})]}),v.jsx("div",{className:"card p-6 bg-blue-50 border border-blue-200",children:v.jsxs("p",{className:"text-sm text-blue-900",children:["📦 We'll automatically install:",v.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[v.jsx("li",{children:"libzmq.dll (x64 & x86)"}),v.jsx("li",{children:"Expert Advisor (ZeroMQBridge)"}),v.jsx("li",{children:"Configuration files"})]})]})}),x?v.jsxs("div",{className:"space-y-4",children:[v.jsx(Ie,{text:"Installing components..."}),v.jsx("div",{className:"text-xs text-gray-500 text-center",children:p.message})]}):v.jsx("button",{onClick:I,disabled:0===i.length,className:"w-full btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:i.length>0?"✅ Start Auto-Installation":"❌ MT5 Not Found"}),j.length>0&&v.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx(Ee,{status:"error"})}),v.jsxs("div",{className:"ml-3",children:[v.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Errors"}),v.jsx("div",{className:"mt-2 text-sm text-red-700 space-y-1",children:j.map((e,t)=>v.jsxs("p",{children:["• ",e]},t))})]})]})})]})}):2===d?v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"🔑 API Credentials"}),v.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Step 2/3: Enter your API credentials from the platform"})]}),v.jsxs("div",{className:"card p-6 space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"platformUrl",className:"label",children:"Platform URL"}),v.jsx("input",{id:"platformUrl",type:"text",value:N,onChange:e=>w(e.target.value),className:"input mt-1",placeholder:"https://fx.nusanexus.com"}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave default if using our platform"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"apiKey",className:"label",children:"API Key"}),v.jsx("input",{id:"apiKey",type:"text",value:S,onChange:e=>C(e.target.value),className:"input mt-1",placeholder:"exe_xxxxxxxxxxxxxxxx"}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Found in your executor dashboard"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"apiSecret",className:"label",children:"API Secret"}),v.jsx("input",{id:"apiSecret",type:"password",value:k,onChange:e=>L(e.target.value),className:"input mt-1",placeholder:"••••••••••••••••"}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Encrypted locally, never stored in plain text"})]}),v.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:v.jsx("p",{className:"text-xs text-blue-900",children:"ℹ️ Your credentials will be used to auto-fetch Pusher configuration and other platform settings. No manual configuration needed!"})}),"idle"!==f&&v.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-md bg-gray-100",children:["success"===f&&v.jsxs(v.Fragment,{children:[v.jsx(Ee,{status:"online"}),v.jsx("span",{className:"text-sm font-medium text-green-700",children:"✅ Configuration fetched & connection successful"})]}),"testing"===f&&v.jsxs(v.Fragment,{children:[v.jsx(Ie,{size:"sm"}),v.jsx("span",{className:"text-sm text-gray-700",children:"Testing connection..."})]}),"error"===f&&v.jsxs(v.Fragment,{children:[v.jsx(Ee,{status:"error"}),v.jsx("span",{className:"text-sm font-medium text-red-700",children:"Connection failed"})]})]}),j.length>0&&v.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx(Ee,{status:"error"})}),v.jsxs("div",{className:"ml-3",children:[v.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Connection Error"}),v.jsx("div",{className:"mt-2 text-sm text-red-700 space-y-1",children:j.map((e,t)=>v.jsxs("p",{children:["• ",e]},t))})]})]})}),v.jsxs("div",{className:"flex space-x-3",children:[v.jsx("button",{onClick:()=>m(1),className:"flex-1 btn btn-secondary",children:"← Back"}),v.jsxs("button",{onClick:()=>{console.log("🔘 [Setup.tsx] Button clicked!"),(async()=>{var e;if(console.log("🚀 [Setup.tsx] handleConnectAndFetchConfig CALLED!"),console.log("[Setup.tsx] Inputs:",{platformUrl:N,apiKey:(null==S?void 0:S.substring(0,10))+"...",apiSecret:"***"}),!N||!S||!k)return console.error("[Setup.tsx] Validation failed: missing credentials"),void b(["Please fill in all credentials"]);if(!S.startsWith("exe_"))return console.error("[Setup.tsx] Validation failed: API key format"),void b(['API Key must start with "exe_"']);console.log("[Setup.tsx] Validation passed, starting connection...");try{h(!0),y("testing"),b([]),l({level:"info",category:"SETUP",message:"Fetching configuration from platform..."}),console.log("[Setup.tsx] Calling fetchConfigFromPlatform...");const a=await s(S,k,N);if(console.log("[Setup.tsx] fetchConfigFromPlatform result:",a),!a)return console.error("[Setup.tsx] Config fetch failed!"),y("error"),b([r||"Failed to fetch configuration from platform"]),void l({level:"error",category:"SETUP",message:r||"Configuration fetch failed"});console.log("[Setup.tsx] Config fetch SUCCESS! Current config:",t),l({level:"info",category:"SETUP",message:"✅ Configuration auto-provisioned from platform",metadata:{executorId:t.executorId,pusherKey:t.pusherKey?"***":"not set",pusherCluster:t.pusherCluster}}),console.log("[Setup.tsx] Config fetch successful, calling setupComplete..."),console.log("[Setup.tsx] Config to send:",{executorId:t.executorId,platformUrl:t.platformUrl,hasPusherKey:!!t.pusherKey}),l({level:"info",category:"SETUP",message:"Testing connection to services..."}),console.log("[Setup.tsx] Calling window.electronAPI.setupComplete...");const n=await(null==(e=window.electronAPI)?void 0:e.setupComplete(t));if(console.log("[Setup.tsx] setupComplete result:",n),null==n?void 0:n.success)y("success"),l({level:"info",category:"SETUP",message:"All services connected successfully"}),m(3);else{y("error");const e=(null==n?void 0:n.error)||"Service connection failed";b([e]),l({level:"error",category:"SETUP",message:e})}}catch(a){y("error");const e=a.message;b([e]),l({level:"error",category:"SETUP",message:`Connection error: ${e}`})}finally{h(!1)}})()},disabled:g||a||!S||!k,className:"flex-1 btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[(g||a)&&v.jsx(Ie,{size:"sm"}),v.jsx("span",{children:g?"Connecting...":"Connect & Auto-Provision"})]})]})]})]})}):3===d?v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"🎉 Ready to Trade!"}),v.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Step 3/3: Your executor is fully configured and ready."})]}),v.jsxs("div",{className:"card p-6 space-y-4",children:[v.jsxs("div",{className:"space-y-3 mb-6",children:[v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),v.jsx("span",{className:"text-sm font-medium text-gray-700",children:"MT5 detected & configured"})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),v.jsx("span",{className:"text-sm font-medium text-gray-700",children:"libzmq.dll installed (x64 & x86)"})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),v.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Expert Advisor installed"})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),v.jsx("span",{className:"text-sm font-medium text-gray-700",children:"API connection established"})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("svg",{className:"h-5 w-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),v.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pusher real-time connection ready"})]})]}),v.jsxs("div",{className:"border-t pt-4",children:[v.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"What happens next:"}),v.jsxs("ul",{className:"space-y-2 text-xs text-gray-600",children:[v.jsx("li",{children:"✨ The Expert Advisor starts monitoring for trading signals"}),v.jsx("li",{children:"📡 Real-time commands are received via Pusher"}),v.jsx("li",{children:"🔌 ZeroMQ bridge manages all MT5 communication"}),v.jsx("li",{children:"📊 Heartbeat keeps your connection alive"})]})]}),v.jsxs("div",{className:"bg-gray-50 rounded-md p-3 space-y-2 text-xs",children:[v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-gray-600",children:"Executor ID:"}),v.jsx("span",{className:"font-mono font-semibold text-gray-900",children:t.executorId})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-gray-600",children:"Platform URL:"}),v.jsx("span",{className:"font-mono text-gray-900 truncate",children:t.platformUrl})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-gray-600",children:"Pusher Cluster:"}),v.jsx("span",{className:"font-mono font-semibold text-gray-900",children:t.pusherCluster})]})]}),v.jsx("button",{onClick:()=>{var e;console.log("🔘 Start Executor button clicked!"),console.log("electronAPI available?",!!window.electronAPI),console.log("setupComplete available?",typeof(null==(e=window.electronAPI)?void 0:e.setupComplete)),(async()=>{try{if(console.log("[Setup.tsx] handleCompleteSetup called"),console.log("[Setup.tsx] Current config:",t),!window.electronAPI){const e="electronAPI not available - check preload script";return console.error("[Setup.tsx]",e),void b([e])}if(!window.electronAPI.setupComplete){const e="setupComplete function not found in electronAPI";return console.error("[Setup.tsx]",e),void b([e])}h(!0),b([]),console.log("[Setup.tsx] Calling setupComplete with config:",{executorId:t.executorId,platformUrl:t.platformUrl,hasPusherKey:!!t.pusherKey,pusherCluster:t.pusherCluster});const e=await window.electronAPI.setupComplete(t);if(console.log("[Setup.tsx] setupComplete result:",e),!(null==e?void 0:e.success)){const t=(null==e?void 0:e.error)||"Setup completion failed";return console.error("[Setup.tsx] Setup failed:",t),b([t]),void h(!1)}console.log("[Setup.tsx] Setup completed successfully! Reloading app..."),n(!0),l({level:"info",category:"SETUP",message:"Setup completed successfully"}),console.log("[Setup.tsx] Reloading window to apply configuration..."),setTimeout(()=>{window.location.reload()},1e3)}catch(e){const t=e instanceof Error?e.message:String(e);console.error("[Setup.tsx] Setup error caught:",e),console.error("[Setup.tsx] Error stack:",e instanceof Error?e.stack:"No stack"),b([t]),l({level:"error",category:"SETUP",message:`Setup completion error: ${t}`})}finally{h(!1)}})()},disabled:g,className:"w-full btn btn-primary btn-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:g?v.jsxs(v.Fragment,{children:[v.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),v.jsx("span",{children:"Starting..."})]}):v.jsx("span",{children:"🚀 Start Executor"})}),j.length>0&&v.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),v.jsxs("div",{className:"ml-3",children:[v.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Setup Error"}),v.jsx("div",{className:"mt-2 text-sm text-red-700 space-y-1",children:j.map((e,t)=>v.jsxs("p",{children:["• ",e]},t))})]})]})})]})]})}):null}
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(t,s)=>{const a=e.forwardRef(({color:a="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:i="",children:o,...c},d)=>{return e.createElement("svg",{ref:d,...Ae,width:r,height:r,stroke:a,strokeWidth:l?24*Number(n)/Number(r):n,className:["lucide",`lucide-${m=t,m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,i].join(" "),...c},[...s.map(([t,s])=>e.createElement(t,s)),...Array.isArray(o)?o:[o]]);var m});return a.displayName=`${t}`,a},Te=Re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),ze=Re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Me=Re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Oe=Re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),De=Re("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),Fe=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ue=Re("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function $e(){var t,s,a,r,n;const{connectionStatus:l,config:i,isConfigured:o,performanceMetrics:c,recentActivity:d}=Ne(),[m,x]=e.useState(null),[u,g]=e.useState(null),[h,p]=e.useState([]),[f,y]=e.useState([]),[j,b]=e.useState(!1),[N,w]=e.useState(new Date);e.useEffect(()=>{S();const e=setInterval(()=>{S()},3e4);return()=>clearInterval(e)},[]);const S=async()=>{var e,t,s,a,r,n,l,i;try{const o=await(null==(t=null==(e=window.electronAPI)?void 0:e.getMT5AccountInfo)?void 0:t.call(e));o&&x(o);const c=await(null==(a=null==(s=window.electronAPI)?void 0:s.getSystemHealth)?void 0:a.call(s));c&&g(c);const d=await(null==(n=null==(r=window.electronAPI)?void 0:r.getRecentSignals)?void 0:n.call(r,10));d&&p(d);const m=await(null==(i=null==(l=window.electronAPI)?void 0:l.getActiveStrategies)?void 0:i.call(l));m&&y(m),w(new Date)}catch(o){console.error("[Dashboard] Failed to load data:",o)}},C=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),k=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return v.jsx("div",{className:"flex-1 overflow-auto bg-gray-50 p-6",children:v.jsxs("div",{className:"max-w-7xl mx-auto",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Windows Executor"}),v.jsxs("p",{className:"text-sm text-gray-600",children:["Monitoring • Last updated: ",k(N)]})]}),v.jsxs("button",{onClick:async()=>{b(!0),await S(),setTimeout(()=>b(!1),500)},disabled:j,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:[v.jsx(De,{className:"h-4 w-4 mr-2 "+(j?"animate-spin":"")}),"Refresh"]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[v.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Web Platform"}),v.jsx(Ee,{status:"connected"===l.pusher?"online":"offline",size:"sm"})]}),v.jsx("div",{className:"text-xs text-gray-500",children:"connected"===l.pusher?"Connected":"Disconnected"})]}),v.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-sm font-medium text-gray-600",children:"MT5 Terminal"}),v.jsx(Ee,{status:"connected"===l.mt5?"online":"offline",size:"sm"})]}),v.jsx("div",{className:"text-xs text-gray-500",children:"connected"===l.mt5?"Connected":"Disconnected"})]}),v.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[v.jsx("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Balance"}),v.jsx("div",{className:"text-lg font-bold text-gray-900",children:m?C(m.balance):"---"}),v.jsxs("div",{className:"text-xs text-gray-500",children:["Equity: ",m?C(m.equity):"---"]})]}),v.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[v.jsx("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Positions"}),v.jsx("div",{className:"text-lg font-bold text-gray-900",children:(null==m?void 0:m.openPositions)||0}),v.jsx("div",{className:"text-xs text-gray-500",children:"Active now"})]})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[v.jsxs("div",{className:"bg-white rounded-lg shadow",children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[v.jsxs("h2",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[v.jsx(Te,{className:"h-4 w-4 mr-2 text-blue-500"}),"Active Strategies"]}),v.jsxs("span",{className:"text-xs text-gray-500",children:[f.length," running"]})]}),v.jsx("div",{className:"p-4",children:f.length>0?v.jsx("div",{className:"space-y-2",children:f.slice(0,5).map(e=>{var t,s;return v.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx(Ee,{status:"active"===e.status?"online":"warning",size:"sm"}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),v.jsxs("div",{className:"text-xs text-gray-500",children:[(null==(t=e.symbols)?void 0:t.slice(0,3).join(", "))||"No symbols",(null==(s=e.symbols)?void 0:s.length)>3&&" +"+(e.symbols.length-3)]})]})]}),v.jsx("div",{className:"text-right",children:v.jsx("div",{className:"text-xs font-medium text-gray-700",children:e.timeframe||"M15"})})]},e.id)})}):v.jsxs("div",{className:"text-center py-8 text-gray-400",children:[v.jsx(Te,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),v.jsx("p",{className:"text-sm",children:"No active strategies"})]})})]}),v.jsxs("div",{className:"bg-white rounded-lg shadow",children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[v.jsxs("h2",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[v.jsx(Fe,{className:"h-4 w-4 mr-2 text-green-500"}),"Recent Signals"]}),v.jsx("span",{className:"text-xs text-gray-500",children:"Last 10"})]}),v.jsx("div",{className:"p-4",children:h.length>0?v.jsx("div",{className:"space-y-2",children:h.slice(0,10).map((e,t)=>{var s;return v.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-gray-100 last:border-0",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("span",{className:"px-2 py-1 text-xs font-bold rounded "+("BUY"===e.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.type}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.symbol}),v.jsxs("div",{className:"text-xs text-gray-500",children:["@ ",null==(s=e.price)?void 0:s.toFixed(5)]})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsx("div",{className:"text-xs text-gray-600",children:k(e.timestamp)}),v.jsxs("div",{className:"text-xs text-gray-500",children:[e.confidence,"% conf"]})]})]},t)})}):v.jsxs("div",{className:"text-center py-8 text-gray-400",children:[v.jsx(Fe,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),v.jsx("p",{className:"text-sm",children:"No recent signals"})]})})]})]}),v.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[v.jsxs("div",{className:"bg-white rounded-lg shadow",children:[v.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:v.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"Performance"})}),v.jsxs("div",{className:"p-4 space-y-3",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Today P&L"}),v.jsxs("span",{className:"text-sm font-bold "+(c.dailyPnL>=0?"text-green-600":"text-red-600"),children:[c.dailyPnL>=0?"+":"",C(c.dailyPnL)]})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Win Rate"}),v.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[c.winRate.toFixed(1),"%"]})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Total Trades"}),v.jsx("span",{className:"text-sm font-medium text-gray-900",children:c.totalTrades})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Profit Factor"}),v.jsx("span",{className:"text-sm font-medium text-gray-900",children:c.profitFactor.toFixed(2)})]}),v.jsx("div",{className:"pt-3 border-t border-gray-200",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Margin Level"}),v.jsxs("span",{className:"text-sm font-bold "+(((null==m?void 0:m.marginLevel)||0)>200?"text-green-600":((null==m?void 0:m.marginLevel)||0)>100?"text-yellow-600":"text-red-600"),children:[(null==(t=null==m?void 0:m.marginLevel)?void 0:t.toFixed(0))||0,"%"]})]})})]})]}),v.jsxs("div",{className:"bg-white rounded-lg shadow",children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[v.jsxs("h2",{className:"text-sm font-semibold text-gray-900 flex items-center",children:[v.jsx(ze,{className:"h-4 w-4 mr-2 text-blue-500"}),"System Health"]}),v.jsx(Ee,{status:(null==u?void 0:u.healthy)?"online":"warning",size:"sm"})]}),v.jsxs("div",{className:"p-4 space-y-2",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Evaluations/min"}),v.jsx("span",{className:"text-sm font-medium text-gray-900",children:(null==(s=null==u?void 0:u.evaluationsPerMinute)?void 0:s.toFixed(1))||"0.0"})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Avg Response"}),v.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(null==(a=null==u?void 0:u.avgEvaluationTime)?void 0:a.toFixed(0))||"0","ms"]})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Cache Hit Rate"}),v.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(null==(r=null==u?void 0:u.cacheHitRate)?void 0:r.toFixed(0))||"0","%"]})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Memory Usage"}),v.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(null==(n=null==u?void 0:u.memoryUsage)?void 0:n.toFixed(0))||"0","MB"]})]}),(null==u?void 0:u.issues)&&u.issues.length>0&&v.jsx("div",{className:"pt-3 border-t border-gray-200",children:v.jsx("div",{className:"space-y-1",children:u.issues.map((e,t)=>v.jsxs("div",{className:"flex items-start text-xs text-yellow-700",children:[v.jsx(ze,{className:"h-3 w-3 mr-1 mt-0.5 flex-shrink-0"}),v.jsx("span",{children:e})]},t))})})]})]}),v.jsxs("div",{className:"bg-white rounded-lg shadow",children:[v.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:v.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"Recent Activity"})}),v.jsx("div",{className:"p-4",children:d.length>0?v.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:d.slice(0,10).map(e=>v.jsx("div",{className:"text-xs",children:v.jsxs("div",{className:"flex items-start space-x-2",children:[v.jsx("span",{className:"inline-block w-2 h-2 rounded-full mt-1 flex-shrink-0 "+("ERROR"===e.type?"bg-red-500":"INFO"===e.type?"bg-blue-500":"bg-green-500")}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"text-gray-700 truncate",children:e.message}),v.jsx("p",{className:"text-gray-400",children:k(e.timestamp)})]})]})},e.id))}):v.jsx("div",{className:"text-center py-4 text-gray-400",children:v.jsx("p",{className:"text-sm",children:"No recent activity"})})})]})]})]}),v.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:v.jsxs("div",{className:"flex items-center justify-between text-sm",children:[v.jsxs("div",{className:"flex items-center space-x-4 text-gray-600",children:[v.jsxs("span",{children:["Executor ID: ",v.jsx("span",{className:"font-mono text-gray-900",children:(null==i?void 0:i.executorId)||"N/A"})]}),v.jsx("span",{className:"text-gray-300",children:"|"}),v.jsxs("span",{children:["Platform: ",v.jsx("span",{className:"font-medium text-gray-900",children:(null==i?void 0:i.platformUrl)||"N/A"})]})]}),v.jsxs("div",{className:"text-gray-600",children:[v.jsx("span",{className:"text-blue-600 font-medium",children:"Full Dashboard"})," available on web platform"]})]})})]})})}const Ke=c(e=>({logs:[],logLevels:{debug:!0,info:!0,warn:!0,error:!0},maxLogs:1e3,autoScroll:!0,addLog:t=>e(e=>({logs:[{id:`${Date.now()}-${Math.random()}`,timestamp:new Date,...t},...e.logs].slice(0,e.maxLogs)})),clearLogs:()=>e({logs:[]}),setLogLevels:t=>e({logLevels:t}),toggleLogLevel:t=>e(e=>({logLevels:{...e.logLevels,[t]:!e.logLevels[t]}})),setAutoScroll:t=>e({autoScroll:t}),setMaxLogs:t=>e({maxLogs:t}),exportLogs:()=>{const e=Ke.getState();return JSON.stringify(e.logs,null,2)}}));function He({isOpen:t,title:s,message:a,confirmText:r="Confirm",cancelText:n="Cancel",onConfirm:l,onCancel:i,type:o="primary"}){const c=e.useRef(null);if(e.useEffect(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&i()};return t&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[t,i]),e.useEffect(()=>{const e=e=>{"Escape"===e.key&&t&&i()};return t&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,i]),!t)return null;const d={primary:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),success:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),warning:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),danger:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{ref:c,className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 overflow-hidden",children:[v.jsx("div",{className:"p-6",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:`flex-shrink-0 ${{primary:"text-primary-600",success:"text-success-600",warning:"text-warning-600",danger:"text-danger-600"}[o]}`,children:d[o]}),v.jsxs("div",{className:"ml-4",children:[v.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s}),v.jsx("p",{className:"mt-2 text-sm text-gray-500",children:a})]})]})}),v.jsxs("div",{className:"bg-gray-50 px-6 py-3 flex justify-end space-x-3",children:[v.jsx("button",{onClick:i,className:"btn btn-secondary",children:n}),v.jsx("button",{onClick:l,className:`btn ${{primary:"btn-primary",success:"btn-success",warning:"btn-warning",danger:"btn-danger"}[o]}`,children:r})]})]})})}function Be(){const{config:t,updateConfig:s}=Le(),{setIsSetupComplete:a,addLog:r,mt5Installations:n}=Ne(),{clearLogs:l,exportLogs:i}=Ke(),[o,c]=e.useState("general"),[d,m]=e.useState(!1),[x,u]=e.useState("idle"),[g,h]=e.useState(!1),[p,f]=e.useState(!1),[y,j]=e.useState([]),[b,N]=e.useState(""),[w,S]=e.useState({maxDailyLoss:500,maxPositions:10,maxLotSize:1,maxDrawdownPercent:20}),C=async()=>{var e,s;try{if(m(!0),j([]),N(""),await(null==(e=window.electronAPI)?void 0:e.updateConfig(t)),(null==t?void 0:t.apiKey)&&(null==t?void 0:t.apiSecret)&&(null==t?void 0:t.executorId)){const e=await(null==(s=window.electronAPI)?void 0:s.updateConfig(t));e&&"object"==typeof e&&e.success?(u("success"),N("Configuration saved and connection test successful")):e&&"object"==typeof e&&e.error?(u("error"),j([e.error||"Connection test failed"])):N("Configuration saved")}else N("Configuration saved");r({level:"info",message:"Configuration updated",category:"SETTINGS"})}catch(a){const e=a.message;j([e]),r({level:"error",message:`Failed to save config: ${e}`,category:"SETTINGS"})}finally{m(!1)}};return e.useEffect(()=>{if(b||y.length>0){const e=setTimeout(()=>{N(""),j([])},5e3);return()=>clearTimeout(e)}},[b,y]),v.jsxs("div",{className:"flex-1 overflow-auto bg-gray-50 p-6",children:[v.jsxs("div",{className:"max-w-4xl mx-auto",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),v.jsx("p",{className:"text-sm text-gray-600",children:"Configure your FX Platform Executor."})]}),b&&v.jsx("div",{className:"mb-4 bg-success-50 border border-success-200 rounded-md p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx(Ee,{status:"online"})}),v.jsxs("div",{className:"ml-3",children:[v.jsx("h3",{className:"text-sm font-medium text-success-800",children:"Success"}),v.jsx("div",{className:"mt-2 text-sm text-success-700",children:b})]})]})}),y.length>0&&v.jsx("div",{className:"mb-4 bg-danger-50 border border-danger-200 rounded-md p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx(Ee,{status:"error"})}),v.jsxs("div",{className:"ml-3",children:[v.jsx("h3",{className:"text-sm font-medium text-danger-800",children:"Error"}),v.jsx("div",{className:"mt-2 text-sm text-danger-700",children:y.map((e,t)=>v.jsx("p",{children:e},t))})]})]})}),v.jsx("div",{className:"border-b border-gray-200 mb-6",children:v.jsx("nav",{className:"-mb-px flex space-x-8",children:["general","mt5","safety","logs"].map(e=>v.jsx("button",{onClick:()=>c(e),className:"py-2 px-1 border-b-2 font-medium text-sm "+(o===e?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),v.jsxs("div",{className:"card p-6",children:["general"===o&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"General Settings"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"executorId",className:"label",children:"Executor ID"}),v.jsx("input",{id:"executorId",type:"text",value:(null==t?void 0:t.executorId)||"",onChange:e=>s({executorId:e.target.value}),className:"input mt-1",placeholder:"Enter your executor ID"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"platformUrl",className:"label",children:"Platform URL"}),v.jsx("input",{id:"platformUrl",type:"text",value:(null==t?void 0:t.platformUrl)||"",onChange:e=>s({platformUrl:e.target.value}),className:"input mt-1",placeholder:"https://fx.nusanexus.com"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"apiKey",className:"label",children:"API Key"}),v.jsx("input",{id:"apiKey",type:"text",value:(null==t?void 0:t.apiKey)||"",onChange:e=>s({apiKey:e.target.value}),className:"input mt-1",placeholder:"Enter your API key"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"apiSecret",className:"label",children:"API Secret"}),v.jsx("input",{id:"apiSecret",type:"password",value:(null==t?void 0:t.apiSecret)||"",onChange:e=>s({apiSecret:e.target.value}),className:"input mt-1",placeholder:"Enter your API secret"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"pusherKey",className:"label",children:"Pusher Key"}),v.jsx("input",{id:"pusherKey",type:"text",value:(null==t?void 0:t.pusherKey)||"",onChange:e=>s({pusherKey:e.target.value}),className:"input mt-1",placeholder:"Enter your Pusher key"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"pusherCluster",className:"label",children:"Pusher Cluster"}),v.jsx("input",{id:"pusherCluster",type:"text",value:(null==t?void 0:t.pusherCluster)||"",onChange:e=>s({pusherCluster:e.target.value}),className:"input mt-1",placeholder:"mt1"})]})]}),v.jsxs("div",{className:"flex justify-end space-x-3",children:[v.jsx("button",{onClick:()=>h(!0),className:"btn btn-secondary",children:"Reset to Defaults"}),v.jsx("button",{onClick:C,disabled:d,className:"btn btn-primary",children:d?"Saving...":"Save Configuration"})]}),"idle"!==x&&v.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[v.jsx(Ee,{status:"success"===x?"online":"error"}),v.jsx("span",{className:"text-sm text-gray-600",children:"success"===x?"Connection test successful":"Connection test failed"})]})]}),"mt5"===o&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"MT5 Settings"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"zmqHost",className:"label",children:"ZeroMQ Host"}),v.jsx("input",{id:"zmqHost",type:"text",value:(null==t?void 0:t.zmqHost)||"",onChange:e=>s({zmqHost:e.target.value}),className:"input mt-1",placeholder:"tcp://localhost"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"zmqPort",className:"label",children:"ZeroMQ Port"}),v.jsx("input",{id:"zmqPort",type:"number",value:(null==t?void 0:t.zmqPort)||"",onChange:e=>s({zmqPort:parseInt(e.target.value)}),className:"input mt-1",placeholder:"5555"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"heartbeatInterval",className:"label",children:"Heartbeat Interval (seconds)"}),v.jsx("input",{id:"heartbeatInterval",type:"number",value:(null==t?void 0:t.heartbeatInterval)||"",onChange:e=>s({heartbeatInterval:parseInt(e.target.value)}),className:"input mt-1",placeholder:"60"})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{id:"autoReconnect",type:"checkbox",checked:(null==t?void 0:t.autoReconnect)||!1,onChange:e=>s({autoReconnect:e.target.checked}),className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),v.jsx("label",{htmlFor:"autoReconnect",className:"ml-2 block text-sm text-gray-900",children:"Auto-reconnect on disconnection"})]})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h4",{className:"text-md font-medium text-gray-900",children:"MT5 Installations"}),v.jsx("button",{onClick:async()=>{var e;try{const t=await(null==(e=window.electronAPI)?void 0:e.getMT5Installations())||[];N(`Found ${t.length} MT5 installation(s)`)}catch(t){const e=t.message;j([e])}},className:"btn btn-secondary text-sm",children:"Re-detect"})]}),n.length>0?v.jsx("div",{className:"space-y-2",children:n.map((e,t)=>v.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"font-medium text-gray-900",children:["MT5 Build ",e.build]}),v.jsx("div",{className:"text-sm text-gray-500",children:e.path})]}),v.jsx(Ee,{status:e.isRunning?"online":"offline"})]},t))}):v.jsx("div",{className:"text-center py-8 text-gray-500",children:"No MT5 installations found"})]}),v.jsxs("div",{className:"flex justify-end space-x-3",children:[v.jsx("button",{onClick:async()=>{var e;try{await(null==(e=window.electronAPI)?void 0:e.setupComplete(t)),a(!1),N("Setup reset. You will need to go through the setup process again.")}catch(s){const e=s.message;j([e])}},className:"btn btn-secondary",children:"Reset Setup"}),v.jsx("button",{onClick:C,disabled:d,className:"btn btn-primary",children:d?"Saving...":"Save Configuration"})]})]}),"safety"===o&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Safety Settings"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"maxDailyLoss",className:"label",children:"Max Daily Loss ($)"}),v.jsx("input",{id:"maxDailyLoss",type:"number",value:w.maxDailyLoss,onChange:e=>S({...w,maxDailyLoss:parseFloat(e.target.value)}),className:"input mt-1",placeholder:"500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"maxPositions",className:"label",children:"Max Positions"}),v.jsx("input",{id:"maxPositions",type:"number",value:w.maxPositions,onChange:e=>S({...w,maxPositions:parseInt(e.target.value)}),className:"input mt-1",placeholder:"10"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"maxLotSize",className:"label",children:"Max Lot Size"}),v.jsx("input",{id:"maxLotSize",type:"number",step:"0.01",value:w.maxLotSize,onChange:e=>S({...w,maxLotSize:parseFloat(e.target.value)}),className:"input mt-1",placeholder:"1.0"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"maxDrawdownPercent",className:"label",children:"Max Drawdown (%)"}),v.jsx("input",{id:"maxDrawdownPercent",type:"number",value:w.maxDrawdownPercent,onChange:e=>S({...w,maxDrawdownPercent:parseFloat(e.target.value)}),className:"input mt-1",placeholder:"20"})]})]}),v.jsx("div",{className:"bg-warning-50 border border-warning-200 rounded-md p-4",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-warning-400",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),v.jsxs("div",{className:"ml-3",children:[v.jsx("h3",{className:"text-sm font-medium text-warning-800",children:"Safety Limits"}),v.jsx("div",{className:"mt-2 text-sm text-warning-700",children:"These limits help protect your account from excessive losses. The executor will automatically stop trading when any limit is reached."})]})]})}),v.jsx("div",{className:"flex justify-end",children:v.jsx("button",{onClick:C,disabled:d,className:"btn btn-primary",children:d?"Saving...":"Save Safety Settings"})})]}),"logs"===o&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Logs Settings"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Export Logs"}),v.jsx("p",{className:"text-sm text-gray-500",children:"Download all logs as a JSON file"})]}),v.jsx("button",{onClick:()=>{const e=i(),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`fx-executor-logs-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},className:"btn btn-secondary",children:"Export Logs"})]}),v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Clear Logs"}),v.jsx("p",{className:"text-sm text-gray-500",children:"Remove all logs from the application"})]}),v.jsx("button",{onClick:()=>f(!0),className:"btn btn-danger",children:"Clear Logs"})]})]})]})]})]}),v.jsx(He,{isOpen:g,title:"Reset Configuration",message:"Are you sure you want to reset all configuration settings to their default values? This action cannot be undone.",confirmText:"Reset",cancelText:"Cancel",onConfirm:async()=>{try{s({executorId:"",apiKey:"",apiSecret:"",platformUrl:"https://fx.nusanexus.com",pusherKey:"",pusherCluster:"mt1",zmqPort:5555,zmqHost:"tcp://localhost",heartbeatInterval:60,autoReconnect:!0}),N("Configuration reset to defaults"),h(!1),r({level:"info",message:"Configuration reset to defaults",category:"SETTINGS"})}catch(e){const t=e.message;j([t])}},onCancel:()=>h(!1),type:"warning"}),v.jsx(He,{isOpen:p,title:"Clear Logs",message:"Are you sure you want to clear all logs? This action cannot be undone.",confirmText:"Clear Logs",cancelText:"Cancel",onConfirm:()=>{l(),f(!1),N("Logs cleared")},onCancel:()=>f(!1),type:"warning"})]})}function qe(){const{logs:t,logLevels:s,setLogLevels:a,autoScroll:r,setAutoScroll:n,maxLogs:l,setMaxLogs:i,exportLogs:o,clearLogs:c}=Ke(),{addLog:d}=Ne(),[m,x]=e.useState(""),[u,g]=e.useState("all"),[h,p]=e.useState(!1),f=e.useRef(null),y=["all",...Array.from(new Set(t.map(e=>e.category||"uncategorized").filter(Boolean)))],j=t.filter(e=>{const t=""===m||e.message.toLowerCase().includes(m.toLowerCase())||e.category&&e.category.toLowerCase().includes(m.toLowerCase()),a=!0===s[e.level],r="all"===u||e.category===u;return t&&a&&r});e.useEffect(()=>{r&&f.current&&(f.current.scrollTop=f.current.scrollHeight)},[t,r]);const b=e=>{switch(e){case"debug":default:return"text-gray-600";case"info":return"text-blue-600";case"warn":return"text-yellow-600";case"error":return"text-red-600"}},N=e=>{switch(e){case"debug":default:return"bg-gray-100";case"info":return"bg-blue-100";case"warn":return"bg-yellow-100";case"error":return"bg-red-100"}},w=e=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return v.jsx("div",{className:"flex-1 overflow-auto bg-gray-50 p-6",children:v.jsxs("div",{className:"max-w-7xl mx-auto",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Logs"}),v.jsx("p",{className:"text-sm text-gray-600",children:"View and filter application logs."})]}),v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",j.length," of ",t.length," logs"]}),v.jsx("button",{onClick:()=>n(!r),className:"text-xs px-3 py-1 rounded-md "+(r?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"),children:r?"Auto-scroll On":"Auto-scroll Off"}),v.jsx("button",{onClick:()=>{const e=o(),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`fx-executor-logs-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),d({level:"info",message:"Logs exported",category:"LOGS"})},className:"btn btn-secondary text-sm",children:"Export"}),v.jsx("button",{onClick:()=>{c(),d({level:"info",message:"Logs cleared by user",category:"LOGS"})},className:"btn btn-danger text-sm",children:"Clear"})]})]}),v.jsxs("div",{className:"card p-4 mb-6",children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[v.jsx("div",{className:"flex-1 min-w-64",children:v.jsx("input",{type:"text",placeholder:"Search logs...",value:m,onChange:e=>x(e.target.value),className:"input w-full"})}),v.jsx("div",{children:v.jsx("select",{value:u,onChange:e=>g(e.target.value),className:"input",children:y.map(e=>v.jsx("option",{value:e,children:"all"===e?"All Categories":e},e))})}),v.jsx("div",{children:v.jsxs("button",{onClick:()=>p(!h),className:"btn btn-secondary text-sm flex items-center space-x-2",children:[v.jsx("span",{children:"Log Levels"}),v.jsx("svg",{className:"w-4 h-4 transition-transform "+(h?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("label",{htmlFor:"maxLogs",className:"text-sm text-gray-600",children:"Max Logs:"}),v.jsx("input",{id:"maxLogs",type:"number",min:"100",max:"10000",step:"100",value:l,onChange:e=>i(parseInt(e.target.value)),className:"input w-20"})]})]}),h&&v.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:v.jsx("div",{className:"flex flex-wrap gap-2",children:["debug","info","warn","error"].map(e=>v.jsx("button",{onClick:()=>(e=>{a({...s,[e]:!s[e]})})(e),className:"px-3 py-1 rounded-md text-sm font-medium transition-colors "+(s[e]?`${N(e)} ${b(e)}`:"bg-gray-100 text-gray-600"),children:e.toUpperCase()},e))})})]}),v.jsx("div",{className:"card p-0 overflow-hidden",children:v.jsx("div",{ref:f,className:"overflow-y-auto custom-scrollbar bg-gray-900 text-gray-100 font-mono text-sm",style:{height:"calc(100vh - 300px)"},onScroll:()=>{if(f.current){const{scrollTop:e,scrollHeight:t,clientHeight:s}=f.current;n(e+s>=t-10)}},children:j.length>0?v.jsx("div",{className:"divide-y divide-gray-800",children:j.map(e=>{return v.jsx("div",{className:"px-4 py-2 hover:bg-gray-800 transition-colors",children:v.jsxs("div",{className:"flex items-start space-x-3",children:[v.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500 whitespace-nowrap",children:[v.jsx("div",{children:(t=e.timestamp,t.toLocaleDateString())}),v.jsx("div",{children:w(e.timestamp)})]}),v.jsx("div",{className:"flex-shrink-0",children:v.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${N(e.level)} ${b(e.level)}`,children:e.level.toUpperCase()})}),e.category&&v.jsx("div",{className:"flex-shrink-0",children:v.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-gray-700 text-gray-300",children:e.category})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("div",{className:"text-gray-100 break-words",children:e.message}),e.metadata&&v.jsxs("details",{className:"mt-1",children:[v.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-400",children:"Metadata"}),v.jsx("pre",{className:"mt-1 text-xs text-gray-400 bg-gray-800 p-2 rounded overflow-x-auto",children:JSON.stringify(e.metadata,null,2)})]})]})]})},e.id);var t})}):v.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:v.jsxs("div",{className:"text-center",children:[v.jsx(Ee,{status:"offline"}),v.jsx("p",{className:"mt-2",children:"No logs to display"}),v.jsx("p",{className:"text-xs mt-1",children:0===t.length?"Logs will appear here as the application runs":"Try adjusting your filters"})]})})})})]})})}function We({connectionStatus:e,onNavigate:t,currentPage:s}){const{connectionStatus:a,config:r,isTradingEnabled:n,setIsTradingEnabled:l,isEmergencyStopActive:i}=Ne();return v.jsxs("div",{className:"electron-drag bg-gray-900 text-white px-4 py-2 flex items-center justify-between text-sm",children:[v.jsxs("div",{className:"flex items-center space-x-6",children:[v.jsx("div",{className:"font-semibold electron-no-drag",children:"FX Platform Executor"}),v.jsxs("div",{className:"flex items-center space-x-4 electron-no-drag",children:[v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(Ee,{status:"connected"===a.pusher?"online":"offline"}),v.jsx("span",{className:"text-xs",children:"Platform"})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(Ee,{status:"connected"===a.mt5?"online":"offline"}),v.jsx("span",{className:"text-xs",children:"MT5"})]})]}),(null==r?void 0:r.executorId)&&v.jsxs("div",{className:"text-xs electron-no-drag",children:["Executor: ",r.executorId]})]}),v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsxs("div",{className:"flex items-center space-x-2 electron-no-drag",children:[v.jsx("label",{className:"text-xs",children:"Trading:"}),v.jsx("button",{onClick:()=>l(!n),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-gray-900 ${n?"bg-success-600":"bg-gray-600"} ${i?"opacity-50 cursor-not-allowed":""}`,children:v.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(n?"translate-x-6":"translate-x-1")})})]}),v.jsx("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("emergency-stop-requested"))},className:"electron-no-drag bg-danger-600 hover:bg-danger-700 text-white px-3 py-1 rounded text-xs font-medium transition-colors",children:"🛑 Emergency"}),v.jsxs("div",{className:"flex items-center space-x-2 electron-no-drag",children:[v.jsx("button",{onClick:()=>{var e,t;return null==(t=null==(e=window.electronAPI)?void 0:e.minimizeApp)?void 0:t.call(e)},className:"text-gray-400 hover:text-white transition-colors",children:v.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),v.jsx("button",{onClick:()=>{var e,t;return null==(t=null==(e=window.electronAPI)?void 0:e.quitApp)?void 0:t.call(e)},className:"text-gray-400 hover:text-white transition-colors",children:v.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]})}function _e({activities:t,maxHeight:s="400px",className:a="",limit:r}){const[n,l]=e.useState(!0),i=e.useRef(null);e.useEffect(()=>{n&&i.current&&(i.current.scrollTop=i.current.scrollHeight)},[t,n]);const o=e=>{switch(e){case"TRADE":return v.jsx("svg",{className:"w-4 h-4 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"SIGNAL":return v.jsx("svg",{className:"w-4 h-4 text-warning-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})});case"ERROR":return v.jsx("svg",{className:"w-4 h-4 text-danger-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return v.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return v.jsxs("div",{className:`card p-6 ${a}`,children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Activity Log"}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("button",{onClick:()=>l(!n),className:"text-xs px-2 py-1 rounded "+(n?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"),children:n?"Auto-scroll On":"Auto-scroll Off"}),v.jsx("button",{onClick:()=>{const e=t.map(e=>({timestamp:e.timestamp.toISOString(),type:e.type,message:e.message,metadata:e.metadata})),s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=`activity-log-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)},className:"text-xs px-2 py-1 bg-gray-100 text-gray-800 rounded hover:bg-gray-200",children:"Export"})]})]}),v.jsx("div",{ref:i,className:"overflow-y-auto custom-scrollbar bg-gray-50 rounded-md p-3",style:{maxHeight:s},onScroll:()=>{if(i.current){const{scrollTop:e,scrollHeight:t,clientHeight:s}=i.current;l(e+s>=t-10)}},children:t.length>0?v.jsx("div",{className:"space-y-2",children:t.map(e=>{return v.jsxs("div",{className:"flex items-start space-x-2",children:[v.jsx("div",{className:"flex-shrink-0 mt-0.5",children:o(e.type)}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("p",{className:"text-sm text-gray-900 truncate",children:e.message}),v.jsx("span",{className:"text-xs text-gray-500 ml-2 flex-shrink-0",children:(t=e.timestamp,t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}))})]}),e.metadata&&v.jsxs("details",{className:"text-xs text-gray-500 mt-1",children:[v.jsx("summary",{className:"cursor-pointer",children:"Details"}),v.jsx("pre",{className:"mt-1 bg-white p-2 rounded border overflow-x-auto",children:JSON.stringify(e.metadata,null,2)})]})]})]},e.id);var t})}):v.jsx("div",{className:"text-center py-8 text-gray-500",children:"No activity yet"})})]})}function Je({message:t="Loading...",progress:s}){const[a,r]=e.useState("");return e.useEffect(()=>{const e=setInterval(()=>{r(e=>e.length>=3?"":e+".")},500);return()=>clearInterval(e)},[]),v.jsx("div",{className:"fixed inset-0 bg-gray-900 flex items-center justify-center z-50",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"mb-4",children:v.jsx("div",{className:"inline-block",children:v.jsxs("svg",{className:"animate-spin h-12 w-12 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}),v.jsxs("div",{className:"text-white text-xl font-semibold mb-2",children:[t,a]}),"number"==typeof s&&v.jsxs("div",{className:"w-64 mx-auto",children:[v.jsx("div",{className:"bg-gray-700 rounded-full h-2 overflow-hidden",children:v.jsx("div",{className:"bg-blue-500 h-full transition-all duration-300",style:{width:`${s}%`}})}),v.jsxs("div",{className:"text-gray-400 text-sm mt-2",children:[s,"%"]})]})]})})}function Ve({notifications:t,onDismiss:s}){e.useEffect(()=>{t.forEach(e=>{const t=e.duration||5e3,a=setTimeout(()=>{s(e.id)},t);return()=>clearTimeout(a)})},[t,s]);const a=e=>{switch(e){case"success":return v.jsx(Me,{className:"w-5 h-5 text-green-500"});case"error":return v.jsx(Ue,{className:"w-5 h-5 text-red-500"});case"warning":return v.jsx(ze,{className:"w-5 h-5 text-yellow-500"});case"info":return v.jsx(Oe,{className:"w-5 h-5 text-blue-500"})}},r=e=>{switch(e){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200"}};return v.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:t.map(e=>v.jsxs("div",{className:`${r(e.type)} border rounded-lg shadow-lg p-4 flex items-start gap-3 animate-slide-in`,children:[v.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a(e.type)}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.title}),v.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.message})]}),v.jsx("button",{onClick:()=>s(e.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:v.jsx(Ue,{className:"w-4 h-4"})})]},e.id))})}function Xe(){console.clear(),console.log("╔═══════════════════════════════════════════════════════════════════════════════╗"),console.log("║ 🚀🚀🚀 APP.TSX LOADED! React is running!                                      ║"),console.log("╚═══════════════════════════════════════════════════════════════════════════════╝");const[,t]=e.useState(!1),[s,r]=e.useState(!0),[n,l]=e.useState("setup"),{isConfigured:i,setIsConfigured:o,connectionStatus:c,setConnectionStatus:d,addRecentActivity:m,updateConnectionStatus:x}=Ne();e.useEffect(()=>{console.log("🔄 App useEffect triggered - initializing..."),console.log("📍 isConfigured:",i),console.log("📍 currentPage:",n);(async()=>{var e,t;try{console.log("Initializing app...");const s=await(null==(e=window.electronAPI)?void 0:e.getConfig());console.log("Config loaded:",s?"Yes":"No",s);s&&s.apiKey&&s.apiSecret&&s.platformUrl&&s.executorId?(console.log("App has valid config, showing dashboard"),o(!0),l("dashboard")):(console.log("App not configured or config invalid, showing setup wizard"),console.log("Config details:",{hasApiKey:!!(null==s?void 0:s.apiKey),hasApiSecret:!!(null==s?void 0:s.apiSecret),hasPlatformUrl:!!(null==s?void 0:s.platformUrl),hasExecutorId:!!(null==s?void 0:s.executorId)}),o(!1),l("setup")),u();const a=await(null==(t=window.electronAPI)?void 0:t.getStatus());a&&d(a.connectionStatus),r(!1),console.log("App initialization complete")}catch(s){console.error("Failed to initialize app:",s),r(!1)}})()},[o,d]);const u=()=>{var e,s,a,r,n,l,i;const o=null==(e=window.electronAPI)?void 0:e.onExecutorInitialized(()=>{t(!0),m({id:Date.now().toString(),type:"INFO",message:"Executor initialized successfully",timestamp:new Date})}),c=null==(s=window.electronAPI)?void 0:s.onConnectionStatusChanged(e=>{x(e);const t=Object.values(e).every(e=>"connected"===e);m({id:Date.now().toString(),type:t?"INFO":"ERROR",message:t?"All services connected":"Some services disconnected",timestamp:new Date,metadata:{connectionStatus:e}})}),d=null==(a=window.electronAPI)?void 0:a.onSafetyAlert(e=>{m({id:Date.now().toString(),type:"ERROR",message:"Safety alert triggered",timestamp:new Date,metadata:e})}),u=null==(r=window.electronAPI)?void 0:r.onEmergencyStop(e=>{m({id:Date.now().toString(),type:"ERROR",message:`Emergency stop activated: ${e.reason||"Unknown reason"}`,timestamp:new Date,metadata:e})}),g=null==(n=window.electronAPI)?void 0:n.onPerformanceAlert(e=>{m({id:Date.now().toString(),type:"INFO",message:"Performance alert",timestamp:new Date,metadata:e})}),h=null==(l=window.electronAPI)?void 0:l.onSecurityThreat(e=>{m({id:Date.now().toString(),type:"ERROR",message:"Security threat detected",timestamp:new Date,metadata:e})}),p=null==(i=window.electronAPI)?void 0:i.onLogAdded(e=>{"error"!==e.level&&"warn"!==e.level||m({id:e.id.toString(),type:"error"===e.level?"ERROR":"INFO",message:e.message,timestamp:e.timestamp,metadata:{category:e.category,...e.metadata}})});return()=>{null==o||o(),null==c||c(),null==d||d(),null==u||u(),null==g||g(),null==h||h(),null==p||p()}};return s?(console.log("Rendering loading screen"),v.jsx(Je,{message:"Initializing FX Executor..."})):i?(console.log("Rendering main app interface"),v.jsx(a,{children:v.jsx(Ge,{})})):(console.log("Rendering setup wizard"),v.jsx("div",{className:"min-h-screen bg-gray-100",children:v.jsx(Pe,{})}))}function Ge(){const e=r(),{connectionStatus:t,addRecentActivity:s}=Ne();return v.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col",children:[v.jsx(We,{connectionStatus:t,onNavigate:()=>{},currentPage:e.pathname.substring(1)||"dashboard"}),v.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[v.jsxs("div",{className:"w-64 bg-white shadow-md",children:[v.jsx("div",{className:"p-4",children:v.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"FX Executor"})}),v.jsx("nav",{className:"mt-4",children:v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx(n,{to:"/dashboard",className:"block w-full text-left px-4 py-2 hover:bg-gray-100 "+("/dashboard"===e.pathname?"bg-blue-50 text-blue-600":"text-gray-700"),children:"Dashboard"})}),v.jsx("li",{children:v.jsx(n,{to:"/settings",className:"block w-full text-left px-4 py-2 hover:bg-gray-100 "+("/settings"===e.pathname?"bg-blue-50 text-blue-600":"text-gray-700"),children:"Settings"})}),v.jsx("li",{children:v.jsx(n,{to:"/logs",className:"block w-full text-left px-4 py-2 hover:bg-gray-100 "+("/logs"===e.pathname?"bg-blue-50 text-blue-600":"text-gray-700"),children:"Logs"})})]})}),v.jsxs("div",{className:"mt-8 border-t border-gray-200",children:[v.jsx("div",{className:"p-4",children:v.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Recent Activity"})}),v.jsx("div",{className:"px-4 pb-4",children:v.jsx(_e,{activities:[],limit:5})})]})]}),v.jsx("div",{className:"flex-1 overflow-auto",children:v.jsxs(l,{children:[v.jsx(i,{path:"/dashboard",element:v.jsx($e,{})}),v.jsx(i,{path:"/settings",element:v.jsx(Be,{})}),v.jsx(i,{path:"/logs",element:v.jsx(qe,{})}),v.jsx(i,{path:"*",element:v.jsx(o,{to:"/dashboard",replace:!0})})]})})]}),v.jsx(Ve,{notifications:[],onDismiss:()=>{}}),v.jsx(be,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})}console.log("╔════════════════════════════════════════╗"),console.log("║  🎯 MAIN.TSX ENTRY POINT!             ║"),console.log("║  JavaScript is executing!             ║"),console.log("╚════════════════════════════════════════╝"),console.log("✅ All imports loaded successfully!"),console.log("📍 window.location:",window.location.href);const Ye=window.navigator.userAgent.includes("Electron");console.log("📍 isElectron:",Ye);j.createRoot(document.getElementById("root")).render(v.jsx(s.StrictMode,{children:v.jsx(Xe,{})})),console.log(`Running in ${Ye?"Electron":"Browser"} environment`);
